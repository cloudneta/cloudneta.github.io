<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic|Noto Serif KR:300,300italic,400,400italic,700,700italic|Noto Sans KR:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"cloudneta.github.io","root":"/","scheme":"Mist","version":"8.0.0-rc.3","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="ì‘ì„±ì : ongja.cloudnet@">
<meta property="og:type" content="article">
<meta property="og:title" content="LabGuide - AWS Transit Gateway">
<meta property="og:url" content="http://cloudneta.github.io/2020/05/16/Transit-Gateway/index.html">
<meta property="og:site_name" content="CloudNet@">
<meta property="og:description" content="ì‘ì„±ì : ongja.cloudnet@">
<meta property="og:locale" content="ko_KR">
<meta property="og:image" content="http://cloudneta.github.io/images/LabGuide-AWS-Transit-Gateway/Untitled.png">
<meta property="og:image" content="http://cloudneta.github.io/images/LabGuide-AWS-Transit-Gateway/Untitled1.png">
<meta property="og:image" content="http://cloudneta.github.io/images/LabGuide-AWS-Transit-Gateway/Untitled2.png">
<meta property="og:image" content="http://cloudneta.github.io/images/LabGuide-AWS-Transit-Gateway/Untitled3.png">
<meta property="og:image" content="http://cloudneta.github.io/images/LabGuide-AWS-Transit-Gateway/Untitled4.png">
<meta property="og:image" content="http://cloudneta.github.io/images/LabGuide-AWS-Transit-Gateway/Untitled5.png">
<meta property="og:image" content="http://cloudneta.github.io/images/LabGuide-AWS-Transit-Gateway/Untitled6.png">
<meta property="og:image" content="http://cloudneta.github.io/images/LabGuide-AWS-Transit-Gateway/Untitled7.png">
<meta property="og:image" content="http://cloudneta.github.io/images/LabGuide-AWS-Transit-Gateway/Untitled8.png">
<meta property="og:image" content="http://cloudneta.github.io/images/LabGuide-AWS-Transit-Gateway/Untitled9.png">
<meta property="og:image" content="http://cloudneta.github.io/images/LabGuide-AWS-Transit-Gateway/Untitled10.png">
<meta property="og:image" content="http://cloudneta.github.io/images/LabGuide-AWS-Transit-Gateway/Untitled11.png">
<meta property="og:image" content="http://cloudneta.github.io/images/LabGuide-AWS-Transit-Gateway/Untitled12.png">
<meta property="og:image" content="http://cloudneta.github.io/images/LabGuide-AWS-Transit-Gateway/Untitled13.png">
<meta property="og:image" content="http://cloudneta.github.io/images/LabGuide-AWS-Transit-Gateway/Untitled14.png">
<meta property="og:image" content="http://cloudneta.github.io/images/LabGuide-AWS-Transit-Gateway/Untitled15.png">
<meta property="og:image" content="http://cloudneta.github.io/images/LabGuide-AWS-Transit-Gateway/Untitled16.png">
<meta property="og:image" content="http://cloudneta.github.io/images/LabGuide-AWS-Transit-Gateway/Untitled17.png">
<meta property="og:image" content="http://cloudneta.github.io/images/LabGuide-AWS-Transit-Gateway/Untitled18.png">
<meta property="og:image" content="http://cloudneta.github.io/images/LabGuide-AWS-Transit-Gateway/Untitled19.png">
<meta property="og:image" content="http://cloudneta.github.io/images/LabGuide-AWS-Transit-Gateway/Untitled20.png">
<meta property="og:image" content="http://cloudneta.github.io/images/LabGuide-AWS-Transit-Gateway/Untitled21.png">
<meta property="og:image" content="http://cloudneta.github.io/images/LabGuide-AWS-Transit-Gateway/Untitled22.png">
<meta property="og:image" content="http://cloudneta.github.io/images/LabGuide-AWS-Transit-Gateway/Untitled23.png">
<meta property="og:image" content="http://cloudneta.github.io/images/LabGuide-AWS-Transit-Gateway/Untitled24.png">
<meta property="og:image" content="http://cloudneta.github.io/images/LabGuide-AWS-Transit-Gateway/Untitled25.png">
<meta property="og:image" content="http://cloudneta.github.io/images/LabGuide-AWS-Transit-Gateway/Untitled26.png">
<meta property="og:image" content="http://cloudneta.github.io/images/LabGuide-AWS-Transit-Gateway/Untitled27.png">
<meta property="og:image" content="http://cloudneta.github.io/images/LabGuide-AWS-Transit-Gateway/Untitled28.png">
<meta property="og:image" content="http://cloudneta.github.io/images/LabGuide-AWS-Transit-Gateway/Untitled29.png">
<meta property="og:image" content="http://cloudneta.github.io/images/LabGuide-AWS-Transit-Gateway/Untitled30.png">
<meta property="og:image" content="http://cloudneta.github.io/images/LabGuide-AWS-Transit-Gateway/Untitled31.png">
<meta property="og:image" content="http://cloudneta.github.io/images/LabGuide-AWS-Transit-Gateway/Untitled32.png">
<meta property="og:image" content="http://cloudneta.github.io/images/LabGuide-AWS-Transit-Gateway/Untitled33.png">
<meta property="og:image" content="http://cloudneta.github.io/images/LabGuide-AWS-Transit-Gateway/Untitled34.png">
<meta property="og:image" content="http://cloudneta.github.io/images/LabGuide-AWS-Transit-Gateway/Untitled35.png">
<meta property="og:image" content="http://cloudneta.github.io/images/LabGuide-AWS-Transit-Gateway/Untitled36.png">
<meta property="og:image" content="http://cloudneta.github.io/images/LabGuide-AWS-Transit-Gateway/Untitled37.png">
<meta property="article:published_time" content="2020-05-16T04:10:03.000Z">
<meta property="article:modified_time" content="2020-06-01T16:56:05.660Z">
<meta property="article:author" content="CloudNet@">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://cloudneta.github.io/images/LabGuide-AWS-Transit-Gateway/Untitled.png">

<link rel="canonical" href="http://cloudneta.github.io/2020/05/16/Transit-Gateway/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'ko'
  };
</script>

  <title>LabGuide - AWS Transit Gateway | CloudNet@</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="CloudNet@" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
        <span class="toggle-line toggle-line-first"></span>
        <span class="toggle-line toggle-line-middle"></span>
        <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">CloudNet@</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>í™ˆ</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>ì¹´í…Œê³ ë¦¬</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>ì•„ì¹´ì´ë¸Œ</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>íƒœê·¸</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="ko">
    <link itemprop="mainEntityOfPage" href="http://cloudneta.github.io/2020/05/16/Transit-Gateway/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="CloudNet@">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CloudNet@">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          LabGuide - AWS Transit Gateway
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">ì‘ì„±ì¼</span>

              <time title="Post created: 2020-05-16 04:10:03" itemprop="dateCreated datePublished" datetime="2020-05-16T04:10:03+00:00">2020-05-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Updated at: 2020-06-01 16:56:05" itemprop="dateModified" datetime="2020-06-01T16:56:05+00:00">2020-06-01</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Network-Connectivity-External-Connectivity/" itemprop="url" rel="index"><span itemprop="name">Network Connectivity - External Connectivity</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2020/05/16/Transit-Gateway/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/05/16/Transit-Gateway/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h6 id="ì‘ì„±ì-ongja-cloudnet"><a href="#ì‘ì„±ì-ongja-cloudnet" class="headerlink" title="ì‘ì„±ì : ongja.cloudnet@"></a>ì‘ì„±ì : ongja.cloudnet@</h6><a id="more"></a>

<br>

<details>
<summary>AWS Transit Gateway ì°¸ê³  ë§í¬</summary>
<div markdown="1">

<p><a href="https://docs.aws.amazon.com/vpc/latest/tgw/what-is-transit-gateway.html" target="_blank" rel="noopener">AWS Transit Gateway ê³µì‹ ë¬¸ì„œ</a><br><a href="https://aws.amazon.com/ko/transit-gateway/" target="_blank" rel="noopener">AWS Transit Gateway ê°œìš”</a><br><a href="https://docs.aws.amazon.com/vpc/latest/tgw/tgw-multicast-overview.html" target="_blank" rel="noopener">Multicast on AWS Transit G</a><a href="https://aws.amazon.com/ko/blogs/networking-and-content-delivery/traffic-management-with-aws-global-accelerator/" target="_blank" rel="noopener">ateway</a><br><a href="https://aws.amazon.com/ko/blogs/korea/new-for-aws-transit-gateway-build-global-networks-and-centralize-monitoring-using-network-manager/" target="_blank" rel="noopener">AWS Transit Gateway ëª¨ë‹ˆí„°ë§ ì¤‘ì•™ ì§‘ì¤‘í™”</a><br><a href="https://aws.amazon.com/ko/transit-gateway/pricing/" target="_blank" rel="noopener">AWS Transit Gateway ìš”ê¸ˆ</a></p>
</div>
</details>

<blockquote>
<p>â˜ AWS ì„œë¹„ìŠ¤ ê´€ë ¨í•´ì„œëŠ” í•­ìƒ ìµœìš°ì„ ìœ¼ë¡œ â€˜AWS ì„¤ëª…ì„œâ€™ ë¥¼ ì½ì–´ë³´ëŠ” ê²ƒì„ ì¶”ì²œí•œë‹¤.<br>í•œê¸€ ë²ˆì—­ì´ ë§¤ë„ëŸ½ì§€ ëª»í•˜ë©´ English ë¡œ ë³€ê²½ í›„ ì½ì–´ë³´ê¸¸ ë°”ë€ë‹¤.</p>
</blockquote>
<hr>
<br>

<h3 id="1-AWS-Transit-Gateway-Theory"><a href="#1-AWS-Transit-Gateway-Theory" class="headerlink" title="1. AWS Transit Gateway Theory"></a>1. AWS Transit Gateway Theory</h3><p><a href="https://aws.amazon.com/ko/transit-gateway/" target="_blank" rel="noopener">1.1 AWS Transit Gateway ë€?</a></p>
<ul>
<li>AWS Transit GatewayëŠ” VPCë‚˜ On-Premise ë“±ì˜ ë„¤íŠ¸ì›Œí¬ë¥¼ ë‹¨ì¼ Gatewayì— ì—°ê²°í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•´ ì£¼ëŠ” ì„œë¹„ìŠ¤ì´ë‹¤.</li>
<li>AWS Transit Gatewayë¥¼ ì‚¬ìš©í•˜ë©´ ì¤‘ì•™ ê²Œì´íŠ¸ì›¨ì´ì™€ ë„¤íŠ¸ì›Œí¬ ì „ë°˜ì˜ ë‹¨ì¼ ì—°ê²°ë§Œ ìƒì„±í•˜ì—¬ ê´€ë¦¬í•˜ë©´ ëœë‹¤.</li>
<li>Hub &amp; Spoke ëª¨ë¸ë¡œ êµ¬ì„±ë˜ë©°, ì—°ê²° ëœ ë„¤íŠ¸ì›Œí¬ë“¤ì€ ë‹¤ë¥¸ ë„¤íŠ¸ì›Œí¬ì— ì—°ê²°í•  í•„ìš” ì—†ì´ AWS Transit Gatewayì—ë§Œ ì—°ê²°í•˜ë©´ ë˜ë¯€ë¡œ ê´€ë¦¬ë¥¼ í¬ê²Œ ê°„ì†Œí™”í•˜ê³  ìš´ì˜ ë¹„ìš©ì„ í¬ê²Œ ì¤„ì—¬ ì¤€ë‹¤.</li>
</ul>
<p><a href="https://aws.amazon.com/ko/transit-gateway/features/" target="_blank" rel="noopener">1.2 AWS Transit Gateway ì£¼ìš” ê¸°ëŠ¥</a></p>
<ul>
<li><p><em>ë¼ìš°íŒ…</em></p>
<p>  : ë™ì  / ì •ì ì˜ Layer 3 ë¼ìš°íŒ…ì„ ì§€ì›í•œë‹¤. </p>
</li>
<li><p><em>ì—£ì§€ ì—°ê²°</em></p>
<p>  : VPNì„ ì‚¬ìš©í•˜ì—¬ AWS Transit Gatewayì™€ ì˜¨í”„ë ˆë¯¸ìŠ¤ ê²Œì´íŠ¸ì›¨ì´ ê°„ì— VPN ì—°ê²°ì„ ìƒì„±í•  ìˆ˜ ìˆë‹¤.</p>
</li>
<li><p><em>VPC ê¸°ëŠ¥ ìƒí˜¸ ìš´ìš©ì„±</em></p>
<p>  : VPCì— ìˆëŠ” ì¸ìŠ¤í„´ìŠ¤ê°€ AWS Transit Gatewayì— ì—°ê²°ëœ ë‹¤ë¥¸ Amazon VPCì— ìˆëŠ” NAT ê²Œì´íŠ¸ì›¨ì´, Network Load Balancer, AWS PrivateLink ë° Amazon Elastic File System ë“±ì— ì•¡ì„¸ìŠ¤í•  ìˆ˜ ìˆë‹¤.</p>
</li>
<li><p><em>ëª¨ë‹ˆí„°ë§</em></p>
<p>  : AWS Transit GatewayëŠ” Amazon CloudWatch ë° Amazon VPC íë¦„ ë¡œê·¸ì™€ ê°™ì€ ì„œë¹„ìŠ¤ì—ì„œ ì‚¬ìš©í•˜ëŠ” í†µê³„ì™€ ë¡œê·¸ë¥¼ ì œê³µí•œë‹¤.</p>
</li>
<li><p><em>ë¦¬ì „ ê°„ VPC í”¼ì–´ë§</em></p>
<p>  : AWS Transit Gateway ë¦¬ì „ ê°„ VPC í”¼ì–´ë§ì€ AWS ê¸€ë¡œë²Œ ë„¤íŠ¸ì›Œí¬ë¥¼ ì‚¬ìš©í•˜ì—¬ AWS ë¦¬ì „ì„ í†µí•´ íŠ¸ë˜í”½ì„ ë¼ìš°íŒ…í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•œë‹¤.</p>
</li>
<li><p><em>ë©€í‹°ìºìŠ¤íŠ¸</em></p>
<p>  : ê³ ê°ì´ í´ë¼ìš°ë“œì—ì„œ ë©€í‹°ìºìŠ¤íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‰½ê²Œ êµ¬ì¶•í•˜ê³  ìˆ˜ë°± ê°œì˜ ìˆ˜ì‹ ìê¹Œì§€ ë©€í‹°ìºìŠ¤íŠ¸ êµ¬ì„±ì„ ì‰½ê²Œ ëª¨ë‹ˆí„°ë§, ê´€ë¦¬ ë° í™•ì¥í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•œë‹¤. </p>
</li>
<li><p><em>ë³´ì•ˆ</em></p>
<p>  : AWS Transit GatewayëŠ” Identity and Access Management(IAM)ì™€ í†µí•©ë˜ë¯€ë¡œ, AWS Transit Gatewayì— ëŒ€í•œ ì•¡ì„¸ìŠ¤ë¥¼ ì•ˆì „í•˜ê²Œ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤.</p>
</li>
<li><p><em>ì§€í‘œ</em></p>
<p>  : ì„±ëŠ¥ê³¼ ì†¡ìˆ˜ì‹ ëœ ë°”ì´íŠ¸, íŒ¨í‚·, íê¸°ëœ íŒ¨í‚·ì„ ë¹„ë¡¯í•œ íŠ¸ë˜í”½ ì§€í‘œë¥¼ í†µí•´ ê¸€ë¡œë²Œ ë„¤íŠ¸ì›Œí¬ë¥¼ ëª¨ë‹ˆí„°ë§í•œë‹¤.</p>
</li>
</ul>
<p>1.3 Non Transit Gateway vs Transit Gateway</p>
<p><img src="/images/LabGuide-AWS-Transit-Gateway/Untitled.png" alt="LabGuide%20AWS%20Transit%20Gateway%20efff213e58a546c5bc56273e4425244a/Untitled.png"></p>
<p>ê·¸ë¦¼ 1.1 Transit Gateway ë¯¸ì‚¬ìš© / ì‚¬ìš© ë¹„êµ Diagram</p>
<ul>
<li><p>ë‹¤ìˆ˜ì˜ VPC í™˜ê²½ì´ë‚˜ On-Premise í™˜ê²½ì— ëŒ€í•´ Transit Gatewayë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³ , VPC Peeringê³¼ VPN, Direct Connectë¥¼ í†µí•œ ê°œë³„ ì—°ê²°ì´ ì´ë£¨ì–´ì ¸ ë³µì¡í•œ ì‘ì—… í™˜ê²½</p>
</li>
<li><p>Transit Gatewayë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ì—°ê²°ë§Œ í•˜ë©´ ë˜ì–´, ì¤‘ì•™ ì§‘ì¤‘í˜• ê°„ëµí•œ ì‘ì—… í™˜ê²½</p>
</li>
</ul>
<blockquote>
<p>â˜ Transit Gatewayë¥¼ ì‚¬ìš©í•˜ë©´ ë³µì¡í•œ AWS ë„¤íŠ¸ì›Œí¬ ì•„í‚¤í…ì²˜ë¥¼ ê°„ì†Œí™” ê°€ëŠ¥í•˜ì—¬ ê´€ë¦¬ ë° ìš´ìš© íš¨ìœ¨ì´ ë³´ì¥ë˜ë©°, í–¥ìƒëœ ë³´ì•ˆê³¼ ë©€í‹°ìºìŠ¤íŠ¸ë¥¼ í™œìš©í•˜ì—¬ ìœ ìš©í•œ í†µì‹ ì´ ê°€ëŠ¥í•˜ë‹¤.</p>
</blockquote>
<p>1.4 AWS Transit Gateway Key Words</p>
<ul>
<li><p><em>Transit Gateway</em> - VPCë“¤ì˜ ì ‘ì ì´ ë˜ëŠ” ì¤‘ì•™ ì§‘ì¤‘í˜• ë‹¨ì¼ Gatewayë¡œ Hub &amp; Spoke í™˜ê²½ì—ì„œ Hub ì—­í• </p>
</li>
<li><p><em>Transit Gateway Attachment</em> - VPCë¥¼ ì—°ê²°í•˜ëŠ” ë°©ì‹ (í˜„ì¬ ë²„ì „ìœ¼ë¡œ 3ê°€ì§€ ë°©ì‹ ì§€ì›)</p>
<ul>
<li><p>VPC Attachment : TGWì™€ ë™ì¼ Region ë‚´ VPCë¥¼ ì§ì ‘ì ìœ¼ë¡œ ì—°ê²° (ë‹¤ë¥¸ ê³„ì •ì— ìƒì„±í•œ VPCë„ ì—°ê²° ê°€ëŠ¥)</p>
</li>
<li><p>VPN Attachment : TGWì™€ VPNë¥¼ ì—°ê²° (Site to Site VPN)</p>
</li>
<li><p>TGW Peering : TGWì™€ ë‹¤ë¥¸ Regionì˜ TGW ê°„ ì—°ê²° (Inter Region TGW Peering)</p>
</li>
</ul>
</li>
<li><p><em>Transit Gateway Routing Table</em> - TGWì—ì„œ ê´€ë¦¬í•˜ëŠ” ë¼ìš°íŒ… í…Œì´ë¸”</p>
</li>
<li><p><em>Transit Gateway Sharing</em> - TGWë¥¼ ê³µìœ í•˜ì—¬ ë‹¤ë¥¸ AWS ê³„ì •ì—ê²Œ ì „ë‹¬í•˜ì—¬ ì—°ê²° ê°€ëŠ¥ (Resource Access Manager í™œìš©)</p>
</li>
<li><p><em>Transit Gateway Multicast</em> - TGWë¥¼ í†µí•´ Multicast íŠ¸ë˜í”½ì„ ì „ë‹¬</p>
<ul>
<li><p>Multicast Domain : Multicast íŠ¸ë˜í”½ì„ ì²˜ë¦¬í•  TGW ì§€ì •</p>
</li>
<li><p>Multicast Associate : Multicast íŠ¸ë˜í”½ì„ ì²˜ë¦¬í•  TGW Attachment ì§€ì •</p>
</li>
<li><p>Multicast Group Source : Multicast Sender ëŒ€ìƒ ì§€ì •</p>
</li>
<li><p>Multicast Group Member : Multicast Reciever ëŒ€ìƒ ì§€ì •</p>
</li>
</ul>
</li>
<li><p><em>Transit Gateway Network Manager</em> - ë…¼ë¦¬ì  ë‹¤ì´ì–´ê·¸ë¨ ë˜ëŠ” ì§€ë¦¬ì  ë§µìœ¼ë¡œ ì¤‘ì•™ ëŒ€ì‹œ ë³´ë“œì—ì„œ ê¸€ë¡œë²Œ ë„¤íŠ¸ì›Œí¬ë¥¼ ì‹œê°í™”</p>
</li>
</ul>
<hr>
<br>

<h3 id="2-AWS-Transit-Gateway-Lab-Preview"><a href="#2-AWS-Transit-Gateway-Lab-Preview" class="headerlink" title="2. AWS Transit Gateway Lab Preview"></a>2. AWS Transit Gateway Lab Preview</h3><p>2.1 Lab Topology</p>
<p><img src="/images/LabGuide-AWS-Transit-Gateway/Untitled1.png" alt="LabGuide%20AWS%20Transit%20Gateway%20efff213e58a546c5bc56273e4425244a/Untitled%201.png"></p>
<p>ê·¸ë¦¼ 2.1 AWS Transit Gateway Lab Topology</p>
<p>â‘  <em>TGW Intra Region VPC Attachment</em> - <code>ë²„ì§€ë‹ˆì•„</code>ì— MAIN SITE êµ¬ì¶• (ë™ì¼ ë¦¬ì „ ë‚´ VPCì™€ TGWë¥¼ ìƒì„±í•˜ì—¬ ì—°ê²°)</p>
<p>â‘¡ <em>Multicast on TGW</em> - <code>ë²„ì§€ë‹ˆì•„</code> MAIN SITEì—ì„œ Multicast í†µì‹  í…ŒìŠ¤íŠ¸</p>
<p>â‘¢ <em>TGW Multi Account VPC Attachment</em> - ë‹¤ë¥¸ ê³„ì •ì˜ <code>ë²„ì§€ë‹ˆì•„</code>ì— SUB SITE êµ¬ì¶• í›„ Resource Access Managerë¥¼ í†µí•´ TGWë¥¼ ê³µìœ í•˜ê³  ë‹¤ë¥¸ ê³„ì •ì˜ VPCì™€ ì—°ê²°</p>
<p>â‘£ <em>TGW Inter Region Peering</em> - <code>ì•„ì¼ëœë“œ</code> ì— BRANCH SITE êµ¬ì¶• í›„ TGW ê°„ í”¼ì–´ë§ ì—°ê²°</p>
<p>â‘¤ <em>TGW VPN Attachment</em> - <code>ì„œìš¸</code>ì— OpenSwan VPN ì„œë²„ë¥¼ ì„¤ì¹˜ í›„ TGWì™€ ì—°ê²°</p>
<p>â‘¥ <em>NATGW though TGW</em> - Private Subnet ì¤‘ DEV í™˜ê²½ì˜ ëŒ€ìƒìœ¼ë¡œ, TGWë¥¼ í†µí•´ <code>ë²„ì§€ë‹ˆì•„</code> MAIN SITEì˜ Egress VPCì— ì¡´ì¬í•˜ëŠ” NAT GWë¡œ ì¸í„°ë„· í†µì‹ </p>
<p>â‘¦ <em>TGW Network Manager</em> - TGW ë„¤íŠ¸ì›Œí¬ ë§¤ë‹ˆì €ë¥¼ í†µí•´ ê¸€ë¡œë²Œ ë„¤íŠ¸ì›Œí¬ ì‹œê°í™”</p>
<p>2.2 AWS ê¸°ë³¸ ì„¤ì •</p>
<ul>
<li>ë³¸ ì‹¤ìŠµì—ì„œ í™œìš©í•  AWS Regionì€ <code>ë²„ì§€ë‹ˆì•„, ì•„ì¼ëœë“œ, ì„œìš¸</code> ì´ë‹¤. í•´ë‹¹ Regionì— ëŒ€í•œ <em>EC2-Key Pair</em>ë¥¼ ìƒì„±</li>
<li>TGW Multi Account VPC Attachment í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ë³¸ ê³„ì • ì™¸ì— ì„œë¸Œ ê³„ì •ì´ í•„ìš”</li>
<li>ëª¨ë“  Regionì— ëŒ€í•œ ê¸°ë³¸ì ì¸ ì¸í”„ë¼ëŠ” <em>CloudFormation</em>ì— ì˜í•´ ìë™ êµ¬ì¶• (ëª¨ë“  ì¸í”„ë¼ê°€ êµ¬ì¶•ë˜ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤.)</li>
<li>ìƒì„±ëœ ëª¨ë“  EC2-Instanceì˜ IP ì£¼ì†ŒëŠ” X.X.X.10ìœ¼ë¡œ ê³ ì •í•˜ì˜€ë‹¤. (ì˜ˆì‹œ: 10.1.1.10, 10.5.1.10 â€¦)</li>
</ul>
<p>2.3 CloudFormation (Infrastructure as Code)</p>
<p>â¤µ <a href="https://s3.ap-northeast-2.amazonaws.com/cloudformation.cloudneta.net/TGW/Virginia_TransitGW_Lab_CF.yaml" target="_blank" rel="noopener">Download Virginia_TransitGW_Lab_CF.yaml</a></p>
<p>â¤µ <a href="https://s3.ap-northeast-2.amazonaws.com/cloudformation.cloudneta.net/TGW/Ireland_TransitGW_Lab_CF.yaml" target="_blank" rel="noopener">Download Ireland_TransitGW_Lab_CF.yaml</a></p>
<p>â¤µ <a href="https://s3.ap-northeast-2.amazonaws.com/cloudformation.cloudneta.net/TGW/Seoul_TransitGW_Lab_CF.yaml" target="_blank" rel="noopener">Download Seoul_TransitGW_Lab_CF.yaml</a></p>
<ul>
<li><code>ë²„ì§€ë‹ˆì•„, ì•„ì¼ëœë“œ, ì„œìš¸</code>ì— ë°°í¬í•  Cloud Formation í…œí”Œë¦¿ì´ë‹¤.</li>
<li>ì§€ê¸ˆ ë°”ë¡œ ë°°í¬í•˜ì§€ ì•Šê³ , ì‹¤ìŠµ ë‹¨ê³„ ë³„ë¡œ í•˜ë‚˜ì”© ë°°í¬í•  ê²ƒì´ë‹ˆ ì¼ë‹¨ ë‹¤ìš´ë¡œë“œë§Œ ë°›ì•„ ë‘ì.</li>
</ul>
<blockquote>
<p>â˜ ë³¸ê²©ì ì¸ ì‹¤ìŠµì— ì•ì„œ, ë¦¬ì†ŒìŠ¤ ë‹¹ ì†ŒëŸ‰ì˜ ê³¼ê¸ˆì´ ë¶ˆê°€í”¼ í•˜ë‹¤.<br>ìì„¸í•œ ì‚¬í•­ì€ <a href="https://aws.amazon.com/ko/transit-gateway/pricing/" target="_blank" rel="noopener">Transit Gateway ìš”ê¸ˆ</a> ë§í¬ë¥¼ ì°¸ê³  ë°”ë€ë‹¤.</p>
</blockquote>
<hr>
<br>

<h3 id="3-AWS-Transit-Gateway-Intra-Region-VPC-Attachment-Test"><a href="#3-AWS-Transit-Gateway-Intra-Region-VPC-Attachment-Test" class="headerlink" title="3. AWS Transit Gateway Intra Region VPC Attachment Test"></a>3. AWS Transit Gateway Intra Region VPC Attachment Test</h3><ul>
<li><strong>ì´ ë²ˆ ë‹¨ê³„ì˜ ì‹¤ìŠµì€ ë™ì¼ ë¦¬ì „ì— ì¡´ì¬í•˜ëŠ” VPCì™€ TGW ê°„ì˜ ì—°ê²°ì„ í…ŒìŠ¤íŠ¸í•œë‹¤. (Intra Region VPC Attachment)</strong></li>
<li>ì‹¤ìŠµ í™˜ê²½: Region - <code>ë²„ì§€ë‹ˆì•„</code> , Account - ë³¸ AWS ê³„ì •</li>
</ul>
<p>3.1 ë²„ì§€ë‹ˆì•„ CloufFormation ë°°í¬</p>
<p>3.1.1) CloudFormation ë°°í¬</p>
<ul>
<li>2.3í•­ì—ì„œ ì œê³µí•œ Virginia_TransitGW_Lab_CF.yaml íŒŒì¼ì„ ë°°í¬í•˜ì.</li>
</ul>
<blockquote>
<p>â˜ ì£¼ì˜: CF Conditionì— ì˜í•´ Main Siteì™€ Sub Siteì˜ ìƒì„± ì¸í”„ë¼ê°€ ë‹¤ë¥´ë‹¤. <strong>íŒŒë¼ë¯¸í„° ê°’ì„ Mainìœ¼ë¡œ ì§€ì •</strong>í•˜ì!</p>
</blockquote>
<p><img src="/images/LabGuide-AWS-Transit-Gateway/Untitled2.png" alt="LabGuide%20AWS%20Transit%20Gateway%20efff213e58a546c5bc56273e4425244a/Untitled%202.png"></p>
<p>ê·¸ë¦¼ 3.1 ë²„ì§€ë‹ˆì•„ CF í…œí”Œë¦¿ ìƒì„± ì¤‘ EnvType íŒŒë¼ë¯¸í„° ê°’ì„ Mainìœ¼ë¡œ ì§€ì •</p>
<details>
<summary>ë²„ì§€ë‹ˆì•„ CF ìƒì„± ì¸í”„ë¼</summary>
<div markdown="1">

<pre><code>- EC2-Instance 3ê°œ
- VPC 2ê°œ, Public Subnet 1ê°œ, Private Subnet 2ê°œ, Routing Table 3ê°œ, IGW 1ê°œ
- Security Group 2ê°œ</code></pre></div>
</details>

<ul>
<li>ìœ„ ìƒì„±ëœ ì¸í”„ë¼ê°€ ì •ìƒì ìœ¼ë¡œ ì˜¬ë¼ì™”ëŠ” ì§€ í™•ì¸í•˜ì.</li>
</ul>
<p>3.1.2) MAIN-MGT EC2 ì ‘ì†</p>
<ul>
<li>í˜„ì¬ ì ‘ì† ê°€ëŠ¥í•œ Public Subnetì— ìœ„ì¹˜í•œ MAIN-MGT EC2ì— SSH ì ‘ì†</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">cat &lt;&lt;EOT &gt;&gt; list.txt</span><br><span class="line">google.com</span><br><span class="line">10.1.1.10</span><br><span class="line">10.2.1.10</span><br><span class="line">10.2.2.10</span><br><span class="line">10.3.1.10</span><br><span class="line">10.3.2.10</span><br><span class="line">10.4.1.10</span><br><span class="line">10.5.1.10</span><br><span class="line">10.6.1.10</span><br><span class="line">EOT</span><br></pre></td></tr></table></figure>

<ul>
<li>list.txt íŒŒì¼ì„ ìƒì„±ì„ ìœ„í•´ ìœ„ ê°’ì„ ë¶™ì—¬ë„£ì (ë³¸ ì‹¤ìŠµì—ì„œ ìƒì„±ë  ëª¨ë“  EC2 IPì™€ êµ¬ê¸€ì£¼ì†Œ)</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@MAIN-MGT ec2-user]<span class="comment"># vi pingall.sh</span></span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">cat list.txt |  <span class="keyword">while</span> <span class="built_in">read</span> output</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    ping -c 1 -W 1 <span class="string">"<span class="variable">$output</span>"</span> &gt; /dev/null</span><br><span class="line">    <span class="keyword">if</span> [ $? -eq 0 ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"node <span class="variable">$output</span> is up"</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"node <span class="variable">$output</span> is down"</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">[root@MAIN-MGT ec2-user]<span class="comment"># chmod +x pingall.sh</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>vi pingall.sh</code> ë¡œ ì§„ì…í•˜ì—¬ ìœ„ì™€ ê°™ì´ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ìƒì„±í•œë‹¤.</li>
<li><code>chmod +x pingall.sh</code> ë¡œ ìŠ¤í¬ë¦½íŠ¸ ê¶Œí•œì„ ë¶€ì—¬í•œë‹¤.</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@MAIN-MGT ec2-user]<span class="comment"># ./pingall.sh</span></span><br><span class="line">node google.com is up</span><br><span class="line">node 10.1.1.10 is up</span><br><span class="line">node 10.2.1.10 is down</span><br><span class="line">node 10.2.2.10 is down</span><br><span class="line">node 10.3.1.10 is down</span><br><span class="line">node 10.3.2.10 is down</span><br><span class="line">node 10.4.1.10 is down</span><br><span class="line">node 10.5.1.10 is down</span><br><span class="line">node 10.6.1.10 is down</span><br><span class="line">[root@MAIN-MGT ec2-user]<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>./pingall.sh</code> ë¡œ ì „ì²´ íƒ€ê²Ÿì— ëŒ€í•œ Ping í…ŒìŠ¤íŠ¸ê°€ ê°€ëŠ¥í•˜ë‹¤.</li>
<li>í˜„ì¬ ìê¸° ìì‹ ê³¼ ì™¸ë¶€ ì¸í„°ë„·ë§Œ ê°€ëŠ¥í•˜ë‹¤.</li>
</ul>
<p>3.2 Transit Gatewaay ìƒì„±</p>
<ul>
<li>VPC  â€”&gt; Transit Gateway â€”&gt; Create Transit Gateway</li>
</ul>
<p><img src="/images/LabGuide-AWS-Transit-Gateway/Untitled3.png" alt="LabGuide%20AWS%20Transit%20Gateway%20efff213e58a546c5bc56273e4425244a/Untitled%203.png"><br>ê·¸ë¦¼ 3.2 Create Transit Gateway</p>
<ul>
<li>Name Tag ê¸°ì…í•˜ê³ , Multicast support enableì„ ë°˜ë“œì‹œ ì²´í¬ í•˜ì! (4ì¥ Multicast on TGW ì‹¤ìŠµ ë•Œ í•„ìš”í•˜ë‹¤. ì¶”í›„ ìˆ˜ì •ì´ ë˜ì§€ ì•Šì•„ ë¯¸ë¦¬ í™œì„±í™”)</li>
<li>1~2ë¶„ ì •ë„ ëŒ€ê¸°í•˜ë©´, ìƒíƒœê°€ available ë¡œ ë³€ê²½ ëœë‹¤.</li>
</ul>
<p>3.3 Transit Gateway Attachment ìƒì„±</p>
<ul>
<li><p>VPC â€”&gt; Transit Gateway Attachment â€”&gt; Create Transit Gateway Attachment (ğŸ˜“ êµ³ì´ í•œê¸€ ë²ˆì—­ì„ í•´ë†”ì„œ Attachmentë¥¼ ì²¨ë¶€íŒŒì¼ë¡œ í‘œí˜„í•¨;)</p>
<ul>
<li><p>Transit Gateway ID ì§€ì •</p>
</li>
<li><p>Attachment Type : VPC</p>
</li>
<li><p>Attachment Name Tag : MAIN-VPC01-ATT</p>
</li>
<li><p>VPC ID : VPC01 â€”&gt; AZ &amp; Subnet ì§€ì •</p>
</li>
</ul>
<hr>
<ul>
<li><p><em>ìƒë™</em></p>
</li>
<li><p>Attachment Name Tag : MAIN-VPC02-ATT</p>
</li>
<li><p>VPC ID : VPC02 â€”&gt; AZ &amp; Subnet ì§€ì •</p>
</li>
</ul>
</li>
<li><p>Transit Gateway Attachment ë¥¼ 2ê°œ ìƒì„± í•œë‹¤. (1~2ë¶„ ì •ë„ ëŒ€ê¸°)</p>
</li>
</ul>
<p><img src="/images/LabGuide-AWS-Transit-Gateway/Untitled4.png" alt="LabGuide%20AWS%20Transit%20Gateway%20efff213e58a546c5bc56273e4425244a/Untitled%204.png"><br>ê·¸ë¦¼ 3.3 TGW Attachment ì •ë³´ í™•ì¸</p>
<ul>
<li>ìƒì„±ëœ 2ê°œì˜ TGW Attachmentë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤. (Resource Type: VPC, State: available)</li>
</ul>
<p>3.4 Routing Table ì„¤ì •</p>
<ul>
<li><p>CloudFormationì— ì˜í•´ ìƒì„±ëœ 3ê°œì˜ ë¼ìš°íŒ… í…Œì´ë¸”ì— ê²½ë¡œë¥¼ ì¶”ê°€í•œë‹¤.</p>
<ul>
<li>ë¼ìš°íŒ… í¸ì§‘ â€”&gt; ë¼ìš°íŒ… ì¶”ê°€ â€”&gt; 10.0.0.0/8 ëŒ€ì—­, tgw-xxxx íƒ€ê²Ÿ</li>
</ul>
</li>
</ul>
<p><img src="/images/LabGuide-AWS-Transit-Gateway/Untitled5.png" alt="LabGuide%20AWS%20Transit%20Gateway%20efff213e58a546c5bc56273e4425244a/Untitled%205.png"></p>
<p>ê·¸ë¦¼ 3.4 ë¼ìš°íŒ… í…Œì´ë¸” í¸ì§‘ (10.0.0.0/8 ëŒ€ì—­ì„ TGWë¡œ ì „ë‹¬í•˜ëŠ” ê²½ë¡œ ì¶”ê°€)</p>
<ul>
<li>ë¼ìš°íŒ… í…Œì´ë¸” 3ê°œ ëª¨ë‘ ë¼ìš°íŒ… ì •ì±… ì¶”ê°€</li>
</ul>
<p>3.5 Verify</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@MAIN-MGT ec2-user]<span class="comment"># ./pingall.sh</span></span><br><span class="line">node google.com is up</span><br><span class="line">node 10.1.1.10 is up</span><br><span class="line">node 10.2.1.10 is up</span><br><span class="line">node 10.2.2.10 is up</span><br><span class="line">node 10.3.1.10 is down</span><br><span class="line">node 10.3.2.10 is down</span><br><span class="line">node 10.4.1.10 is down</span><br><span class="line">node 10.5.1.10 is down</span><br><span class="line">node 10.6.1.10 is down</span><br><span class="line">[root@MAIN-MGT ec2-user]<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<ul>
<li>MAIN-MGT EC2ì— ì ‘ì†í•˜ì—¬ <code>pingall.sh</code> ìŠ¤í¬ë¦½íŠ¸ë¥¼ ìˆ˜í–‰í•œë‹¤.</li>
<li><code>ë²„ì§€ë‹ˆì•„</code> MAINì— ì¡´ì¬í•˜ëŠ” EC2 ë¼ë¦¬ í†µì‹ ì´ ê°€ëŠ¥í•˜ë‹¤.</li>
</ul>
<details>
<summary><b>3ì¥ í˜„ì¬ê¹Œì§€ ì™„ë£Œëœ êµ¬ì„±ë„ í™•ì¸</summary></b>
<div markdown="1">

<p><img src="/images/LabGuide-AWS-Transit-Gateway/Untitled6.png" alt="LabGuide%20AWS%20Transit%20Gateway%20efff213e58a546c5bc56273e4425244a/Untitled%206.png"></p>
</div>
</details>

<hr>
<br>

<h3 id="4-Multicast-on-Transit-Gateway-Test"><a href="#4-Multicast-on-Transit-Gateway-Test" class="headerlink" title="4. Multicast on Transit Gateway Test"></a>4. Multicast on Transit Gateway Test</h3><ul>
<li><strong>ì´ ë²ˆ ë‹¨ê³„ì˜ ì‹¤ìŠµì€ TGWì„ í†µí•´ Multicast í†µì‹ ì„ í…ŒìŠ¤íŠ¸í•œë‹¤. (Multicast on Transit Gateway)</strong></li>
<li>MAIN-MGT ì¸ìŠ¤í„´ìŠ¤ë¥¼ Multicast Senderë¡œ í•˜ê³ , MAIN-TESTì™€ MAIN-DEV ì¸ìŠ¤í„´ìŠ¤ë¥¼ Multicast Receiverë¡œ í•œë‹¤.</li>
<li>Multicast íŠ¸ë˜í”½ì˜ UDP í¬íŠ¸ ë²ˆí˜¸ì— ëŒ€í•´ Security Groupì—ì„œ í—ˆìš©í•´ì•¼ í•œë‹¤. (CFë¡œ ë¯¸ë¦¬ ì„¤ì •í•´ ë†ˆ)</li>
<li>ì‹¤ìŠµ í™˜ê²½: Region - <code>ë²„ì§€ë‹ˆì•„</code> , Account - ë³¸ AWS ê³„ì •</li>
</ul>
<p><a href="https://docs.aws.amazon.com/vpc/latest/tgw/tgw-multicast-overview.html" target="_blank" rel="noopener">Multicast on transit gateways</a></p>
<p>ì°¸ê³  ë§í¬ : Multicast on transit gateway</p>
<p><em>Multicast ì‹¤ìŠµì— ì•ì„œ ê³ ë ¤ ì‚¬í•­</em></p>
<ul>
<li>í˜„ì¬ Multicast ë¼ìš°íŒ… ê¸°ëŠ¥ì€ <code>ë²„ì§€ë‹ˆì•„</code> ë¦¬ì „ì—ì„œë§Œ ì§€ì›í•˜ê³  ìˆë‹¤.</li>
<li>í•´ë‹¹ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë ¤ë©´ TGWë¥¼ ìƒì„±í•  ë•Œ Multicast Supportë¥¼ í™œì„±í•´ì•¼ í•œë‹¤. (ì´ë¯¸ í™œì„±í™” í•¨)</li>
<li>IGMPëŠ” ë¯¸ì§€ì›ìœ¼ë¡œ TGWì—ì„œ Multicast Domainê³¼ Sender / Receiverë¥¼ ê´€ë¦¬í•˜ì—¬ ë¼ìš°íŒ… ëœë‹¤.</li>
<li>EC2 ì¸ìŠ¤í„´ìŠ¤ íƒ€ì…ì´ Nitro ì—¬ì•¼ Senderê°€ ë  ìˆ˜ ìˆê³ , Non Nitroê°€ Receicerê°€ ë  ìˆ˜ ìˆì§€ë§Œ Source/Destination Checkë¥¼ ë¹„í™œì„±í™”í•´ì•¼ ë™ì‘í•œë‹¤.</li>
<li>ë³¸ ì‹¤ìŠµì—ì„œ CloudFormationìœ¼ë¡œ ìƒì„±í•œ EC2 ì¸ìŠ¤í„´ìŠ¤ íƒ€ì…ì€ Nitro íƒ€ì…ìœ¼ë¡œ ì§€ì •í•˜ì˜€ë‹¤.</li>
</ul>
<p>4.1 Multicast ë¼ìš°íŒ… ì„¤ì • ì „ì— í…ŒìŠ¤íŠ¸</p>
<p>4.1.1) MAIN-MGT ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ì† (Sender)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@MAIN-MGT ec2-user]<span class="comment"># omping -m 239.1.1.1 -p 10000 10.1.1.10</span></span><br><span class="line">10.1.1.10 : waiting <span class="keyword">for</span> response msg</span><br><span class="line">10.1.1.10 : joined (S,G) = (*, 239.1.1.1), pinging</span><br><span class="line">10.1.1.10 :   unicast, seq=1, size=69 bytes, dist=0, time=0.016ms</span><br><span class="line">10.1.1.10 : multicast, seq=1, size=69 bytes, dist=0, time=0.021ms</span><br><span class="line">10.1.1.10 :   unicast, seq=2, size=69 bytes, dist=0, time=0.041ms</span><br><span class="line">10.1.1.10 : multicast, seq=2, size=69 bytes, dist=0, time=0.046ms</span><br><span class="line">10.1.1.10 :   unicast, seq=3, size=69 bytes, dist=0, time=0.050ms</span><br></pre></td></tr></table></figure>

<ul>
<li><code>omping -m 239.1.1.1 -p 10000 10.1.1.10</code> ëª…ë ¹ì–´ë¡œ Multicast íŠ¸ë˜í”½ì„ ë°œìƒ ì‹œí‚¨ë‹¤.</li>
<li>Multicast IP ëŒ€ì—­ : 239.1.1.1 , Port ë²ˆí˜¸ : UDP 10000</li>
</ul>
<p>4.1.2) MAIN-TEST, MAIN-DEV ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ì† (Receiver)</p>
<ul>
<li>MAIN-TEST, MAIN-DEVì€ Private Subnetì— ìœ„ì¹˜í•˜ì—¬ ë‹¤ì´ë ‰íŠ¸ë¡œ SSH ì ‘ê·¼ì´ ë¶ˆê°€í•˜ë‹¤.</li>
<li>MAIN-MGTì— ì ‘ê·¼ í›„ <code>ssh root@10.2.1.10</code>ê³¼ <code>ssh root@10.2.2.10</code> ëª…ë ¹ì–´ë¡œ ê±°ì³ì„œ ì ‘ê·¼í•œë‹¤.</li>
<li>Key-Pair ì—†ì´ Root ê³„ì •ìœ¼ë¡œ ì ‘ê·¼í•˜ë©°, íŒ¨ìŠ¤ì›Œë“œëŠ” qwe123 ì´ë‹¤.</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[ec2-user@MAIN-MGT ~]$ ssh root@10.2.1.10</span><br><span class="line">:</span><br><span class="line">password:</span><br><span class="line">:</span><br><span class="line">[root@MAIN-TEST ~]<span class="comment">#</span></span><br><span class="line">[root@MAIN-TEST ~]<span class="comment"># tcpdump ip dst 239.1.1.1 -nn</span></span><br><span class="line">tcpdump: verbose output suppressed, use -v or -vv <span class="keyword">for</span> full protocol decode</span><br><span class="line">listening on eth0, link-type EN10MB (Ethernet), capture size 262144 bytes</span><br></pre></td></tr></table></figure>

<ul>
<li><code>tcpdump ip dst 239.1.1.1 -nn</code> ëª…ë ¹ì–´ë¡œ ëª©ì ì§€ IPê°€ 239.1.1.1ì¸ íŒ¨í‚·ì„ ì¡ì•„ ì¶œë ¥í•œë‹¤.</li>
</ul>
<p><img src="/images/LabGuide-AWS-Transit-Gateway/Untitled7.png" alt="LabGuide%20AWS%20Transit%20Gateway%20efff213e58a546c5bc56273e4425244a/Untitled%207.png"></p>
<p>ê·¸ë¦¼ 4.1 Multicast ë¼ìš°íŒ… ì„¤ì • ì „ í…ŒìŠ¤íŠ¸</p>
<ul>
<li>ì¢Œì¸¡ Multicast Senderì—ì„œ 239.1.1.1 íŠ¸ë˜í”½ì„ ë°œìƒí•˜ê³  ìˆì§€ë§Œ, ìš°ì¸¡ Multicast Receiverë“¤ë¡œ ì¸ì…ë˜ì§€ ì•ŠëŠ”ë‹¤.</li>
</ul>
<p>4.2 Transit Gateway Multicast ì„¤ì •</p>
<p>4.2.1) Create Transit Gateway Multicast Domain</p>
<ul>
<li><p>VPC â€”&gt; Transit Gateway Multicast â€”&gt; Create Transit Gateway Multicast Domain</p>
<ul>
<li>Transit Gateway ID ì§€ì •</li>
</ul>
</li>
</ul>
<p><img src="/images/LabGuide-AWS-Transit-Gateway/Untitled8.png" alt="LabGuide%20AWS%20Transit%20Gateway%20efff213e58a546c5bc56273e4425244a/Untitled%208.png"><br>ê·¸ë¦¼ 4.2 Transit Gateway Multicast Domain í™•ì¸</p>
<p>4.2.2) Create Association</p>
<ul>
<li><p>VPC â€”&gt; Transit Gateway Multicast â€”&gt; ì‘ì—… â€”&gt; Create Association</p>
<ul>
<li><p>Choose attachment to associate : MAIN-VPC01-ATT</p>
</li>
<li><p>Choose Subnets to associate : Subnet ì„ íƒ</p>
</li>
</ul>
<hr>
<ul>
<li><p>Choose attachment to associate : MAIN-VPC02-ATT</p>
</li>
<li><p>Choose Subnets to associate : Subnet ì„ íƒ</p>
</li>
</ul>
</li>
<li><p>3ì¥ì—ì„œ ìƒì„±í•œ 2ê°œì˜ TGW Attachmentë¥¼ ì„ íƒí•œ í›„ Subnetì„ ì§€ì •í•œë‹¤. (TGW-VPC01-ATT, TGW-VPC02-ATT)</p>
</li>
</ul>
<p><img src="/images/LabGuide-AWS-Transit-Gateway/Untitled9.png" alt="LabGuide%20AWS%20Transit%20Gateway%20efff213e58a546c5bc56273e4425244a/Untitled%209.png"></p>
<p>ê·¸ë¦¼ 4.3 TGW Multicast Domainì˜ Assoiciate ì •ë³´ &amp; ì§€ì •ëœ Subnet í™•ì¸</p>
<p>4.2.3) Add group sources</p>
<ul>
<li><p>VPC â€”&gt; Transit Gateway Multicast â€”&gt; ì‘ì—… â€”&gt; Add group sources</p>
<ul>
<li><p>Group IP Address : 239.1.1.1</p>
</li>
<li><p>Choose network interfaces : MAIN-MGT ì§€ì •</p>
</li>
</ul>
</li>
<li><p>EC2 ì¸ìŠ¤í„´ìŠ¤ MAIN-MGT ì§€ì •ì„ í•  ë•Œ êµ¬ë¶„ì´ í˜ë“¤ë‹¤. (ì„¤ì • ì „ì— MAIN-MGTì— ëŒ€í•œ ì •ë³´ë¥¼ í™•ì¸ í›„ ì§€ì •í•˜ì)</p>
</li>
</ul>
<p><img src="/images/LabGuide-AWS-Transit-Gateway/Untitled10.png" alt="LabGuide%20AWS%20Transit%20Gateway%20efff213e58a546c5bc56273e4425244a/Untitled%2010.png"></p>
<p>ê·¸ë¦¼ 4.4 Group Source í™•ì¸</p>
<ul>
<li>Groups íƒ­ì— ì§„ì…í•˜ë©´ ëŒ€ìƒ ë³„ Sourceì™€ Member í™•ì¸ì´ ê°€ëŠ¥í•˜ë‹¤. (MAIN-MGTë¥¼ source ë¡œ ì§€ì •)</li>
</ul>
<p>4.2.4) Add group members</p>
<ul>
<li><p>VPC â€”&gt; Transit Gateway Multicast â€”&gt; ì‘ì—… â€”&gt; Add group members</p>
<ul>
<li><p>Group IP Address : 239.1.1.1</p>
</li>
<li><p>Choose network interfaces : MAIN-TESTì™€ MAIN-DEV ì§€ì •</p>
</li>
</ul>
</li>
<li><p>ë§ˆì°¬ê°€ì§€ë¡œ ëŒ€ìƒ êµ¬ë¶„ì´ í˜ë“¤ì–´ ë¯¸ë¦¬ í™•ì¸ í›„ 2ê°œì˜ ëŒ€ìƒ ì§€ì •í•œë‹¤.</p>
</li>
</ul>
<p><img src="/images/LabGuide-AWS-Transit-Gateway/Untitled11.png" alt="LabGuide%20AWS%20Transit%20Gateway%20efff213e58a546c5bc56273e4425244a/Untitled%2011.png"></p>
<p>ê·¸ë¦¼ 4.5 Group Member í™•ì¸</p>
<ul>
<li>MAIN-TESTì™€ MAIN-DEVë¥¼ member ë¡œ ì§€ì •</li>
</ul>
<p>4.3 Verify</p>
<ul>
<li>4.1.2í•­ê³¼ ê°™ì´ í…ŒìŠ¤íŠ¸ë¥¼ í•´ë³¸ë‹¤.</li>
</ul>
<p><img src="/images/LabGuide-AWS-Transit-Gateway/Untitled12.png" alt="LabGuide%20AWS%20Transit%20Gateway%20efff213e58a546c5bc56273e4425244a/Untitled%2012.png"></p>
<p>ê·¸ë¦¼ 4.6 Multicast on Transit Gateway í…ŒìŠ¤íŠ¸ ê²°ê³¼</p>
<ul>
<li>MAIN-MGT (Multicast Sender)ì—ì„œ ë°œìƒí•˜ëŠ” 239.1.1.1 Multicast íŠ¸ë˜í”½ì€ MAIN-TESTì™€ MAIN-DEV (Multicast Receiver)ë¡œ ì¸ì…ëœë‹¤.</li>
<li>ì¦‰, TGWê°€ Multicast Groupì„ ê´€ë¦¬í•˜ì—¬ ë¼ìš°íŒ…í•˜ì—¬ Source ì •ë³´ë¥¼ Memberì—ê²Œ ì „ë‹¬í•´ ì¤€ë‹¤.</li>
<li>TGWì—ì„œ Multicast ì„¤ì •ì„ í•˜ë©´ ë°”ë¡œ ì ìš©ë˜ì§€ ì•Šê³  1~2ë¶„ì •ë„ ëŒ€ê¸° ì‹œê°„ì´ í•„ìš”í•˜ë‹¤.</li>
</ul>
<blockquote>
<p>â˜ í˜„ì¬ Transit Gateway ìƒì—ì„œ ë™ì‘í•˜ëŠ” MulticastëŠ” ë¯¸ì™„ì„± ì„œë¹„ìŠ¤ì´ë©°, ë²„ì§€ë‹ˆì•„ ë¦¬ì „ì—ë§Œ ë™ì‘í•˜ëŠ” ì œì•½ì´ ìˆë‹¤. í–¥í›„ ë‹¤ë¥¸ ë¦¬ì „ê¹Œì§€ ì„œë¹„ìŠ¤ê°€ ë™ì‘í•˜ê±°ë‚˜ ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ë©´, ì¶”ê°€ì ì¸ ì‹¤ìŠµì„ ì§„í–‰í•  ì˜ˆì •ì´ë‹¤.<br>ê·¸ë¦¬ê³ , í˜„ì¬ ì‹¤ìŠµ ìƒ Multicast ë™ì‘ì€ ê°•ì œë¡œ íŠ¸ë˜í”½ì„ ì¸ì…í•˜ëŠ” í˜•íƒœì˜ ì‹¤ìŠµì´ë¼ ì¶”í›„ ê¸°íšŒê°€ ë˜ë©´ ì‹¤ì œ Multicast Stramì„ í†µí•´ ì‹¤ìŠµì„ ì§„í–‰í•´ ë³´ë„ë¡ í•˜ê² ë‹¤.</p>
</blockquote>
<hr>
<br>

<h3 id="5-AWS-Transit-Gateway-Multi-Account-VPC-Attachment-Test"><a href="#5-AWS-Transit-Gateway-Multi-Account-VPC-Attachment-Test" class="headerlink" title="5. AWS Transit Gateway Multi Account VPC Attachment Test"></a>5. AWS Transit Gateway Multi Account VPC Attachment Test</h3><ul>
<li><strong>ì´ ë²ˆ ë‹¨ê³„ì˜ ì‹¤ìŠµì€ TGWì„ ì •ë³´ë¥¼ ë‹¤ë¥¸ ê³„ì •ìœ¼ë¡œ ê³µìœ í•˜ì—¬ VPC ì—°ê²°ì„ í…ŒìŠ¤íŠ¸í•œë‹¤. (Multi Account VPC Attachment)</strong></li>
<li>ì´ ë²ˆ ë‹¨ê³„ì—ì„œëŠ” ì„œë¸Œ AWS ê³„ì •ì´ í•„ìš”í•˜ë‹¤. (<code>ë²„ì§€ë‹ˆì•„</code> ë¦¬ì „ì—ì„œ í…ŒìŠ¤íŠ¸í•˜ë©°, CF ë°°í¬ ì „ì— Key-Pairë¥¼ ë¯¸ë¦¬ ìƒì„±í•´ ë‘ì)</li>
<li>ë™ì¼í•œ ë¸Œë¼ìš°ì €ì—ì„œ ë¡œê·¸ì¸ ì‹œ ê¸°ì¡´ ê³„ì •ì€ ë¡œê·¸ì•„ì›ƒì´ ëœë‹¤. ë‹¤ë¥¸ ë¸Œë¼ìš°ì € ì¶”ê°€í•˜ì—¬ ì‹¤ìŠµí•˜ë©´ ë³¸ ê³„ì •ê³¼ ì„œë¸Œ ê³„ì •ì„ ê°™ì´ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.</li>
<li>ì‹¤ìŠµ í™˜ê²½: Region - <code>ë²„ì§€ë‹ˆì•„</code> , Account - ë³¸ AWS ê³„ì • + ì„œë¸Œ AWS ê³„ì •</li>
</ul>
<p><a href="https://aws.amazon.com/ko/blogs/korea/new-use-an-aws-transit-gateway-to-simplify-your-network-architecture/" target="_blank" rel="noopener">AWS Transit Gateway ì¶œì‹œ - VPC ë„¤íŠ¸ì›Œí¬ ì•„í‚¤í…ì²˜ ë‹¨ìˆœí™” ê°€ëŠ¥ (ì„œìš¸ ë¦¬ì „ í¬í•¨) | Amazon Web Services</a></p>
<p>ì°¸ê³  ë§í¬ : Resource Access Managerë¥¼ í™œìš©í•˜ì—¬ Multi Account VPC Attachment</p>
<p>5.1 ë²„ì§€ë‹ˆì•„ CloufFormation ë°°í¬ (ì„œë¸Œ ê³„ì •)</p>
<p>5.1.1) CloudFormation ë°°í¬</p>
<ul>
<li>2.3í•­ì—ì„œ ì œê³µí•œ Virginia_TransitGW_Lab_CF.yaml íŒŒì¼ì„ ë°°í¬í•˜ì.</li>
</ul>
<blockquote>
<p>â˜ ì£¼ì˜: CF Conditionì— ì˜í•´ Main Siteì™€ Sub Siteì˜ ìƒì„± ì¸í”„ë¼ê°€ ë‹¤ë¥´ë‹¤. <strong>íŒŒë¼ë¯¸í„° ê°’ì„ Subë¡œ ì§€ì •</strong>í•˜ì!</p>
</blockquote>
<p><img src="/images/LabGuide-AWS-Transit-Gateway/Untitled13.png" alt="LabGuide%20AWS%20Transit%20Gateway%20efff213e58a546c5bc56273e4425244a/Untitled%2013.png"></p>
<p>ê·¸ë¦¼ 5.1 ì„œë¸Œ ê³„ì •ì—ì„œ ë²„ì§€ë‹ˆì•„ CF í…œí”Œë¦¿ ìƒì„± ì¤‘ EnvType íŒŒë¼ë¯¸í„° ê°’ì„ Subë¡œ ì§€ì •</p>
<ul>
<li>ì„œë¸Œ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸ í›„ <code>ë²„ì§€ë‹ˆì•„</code>ì—ì„œ CloudFormation í…œí”Œë¦¿ì„ ì‹¤í–‰í•œë‹¤.</li>
<li>EnvTypeì€ Subë¡œ ì§€ì •í•˜ì!!</li>
</ul>
<details>
<summary>ë²„ì§€ë‹ˆì•„ CF ìƒì„± ì¸í”„ë¼ (ì„œë¸Œ ê³„ì •)</summary>
<div markdown="1">

<pre><code>- EC2-Instance 2ê°œ
- VPC 1ê°œ, Private Subnet 2ê°œ, Routing Table 2ê°œ
- Security Group 1ê°œ</code></pre></div>
</details>

<ul>
<li>ìœ„ ìƒì„±ëœ ì¸í”„ë¼ê°€ ì •ìƒì ìœ¼ë¡œ ì˜¬ë¼ì™”ëŠ” ì§€ í™•ì¸í•˜ì</li>
</ul>
<p>5.2 Resource Access Managerë¥¼ í™œìš©í•˜ì—¬ TGW ê³µìœ  (ë³¸ ê³„ì • &amp; ì„œë¸Œ ê³„ì •)</p>
<p>5.2.1) Resource Access Manager ë¦¬ì†ŒìŠ¤ ê³µìœ  ìƒì„± (ë³¸ ê³„ì •)</p>
<p><img src="/images/LabGuide-AWS-Transit-Gateway/Untitled14.png" alt="LabGuide%20AWS%20Transit%20Gateway%20efff213e58a546c5bc56273e4425244a/Untitled%2014.png"></p>
<p>ê·¸ë¦¼ 5.2 ë³¸ ê³„ì •ì—ì„œ Resource Access Manager ì§„ì…</p>
<ul>
<li><p>Resource Access Manager â€”&gt; ë¦¬ì†ŒìŠ¤ ê³µìœ  ìƒì„±</p>
<ul>
<li><p>ì´ë¦„ : CloudNeta-TGW-Sharing</p>
</li>
<li><p>ë¦¬ì†ŒìŠ¤ ìœ í˜• ì„ íƒ : ì „ì†¡ ê²Œì´íŠ¸ì›¨ì´ â€”&gt; MAIN SITEì— ìƒì„±í•œ TGW ì§€ì •</p>
</li>
<li><p>í”„ë¦°ì‹œí„ AWS ê³„ì • ë²ˆí˜¸ â€”&gt; ì„œë¸Œ AWS ê³„ì • ë²ˆí˜¸ ì…ë ¥</p>
</li>
</ul>
</li>
</ul>
<p><img src="/images/LabGuide-AWS-Transit-Gateway/Untitled15.png" alt="LabGuide%20AWS%20Transit%20Gateway%20efff213e58a546c5bc56273e4425244a/Untitled%2015.png"></p>
<p>ê·¸ë¦¼ 5.3 ì„œë¸Œ ê³„ì •ì—ì„œ ë‚´ ë³´ì•ˆ ìê²© ì¦ëª…ì— ì§„ì…í•˜ì—¬ AWS ê³„ì • ID í™•ì¸</p>
<p><img src="/images/LabGuide-AWS-Transit-Gateway/Untitled16.png" alt="LabGuide%20AWS%20Transit%20Gateway%20efff213e58a546c5bc56273e4425244a/Untitled%2016.png"></p>
<p>ê·¸ë¦¼ 5.4 ë¦¬ì†ŒìŠ¤ ê³µìœ  ì„¤ì • í™”ë©´</p>
<p>5.2.2) Resource Access Manager ë¦¬ì†ŒìŠ¤ ê³µìœ  ìˆ˜ë½ (ì„œë¸Œ ê³„ì •)</p>
<p><img src="/images/LabGuide-AWS-Transit-Gateway/Untitled17.png" alt="LabGuide%20AWS%20Transit%20Gateway%20efff213e58a546c5bc56273e4425244a/Untitled%2017.png"></p>
<p>ê·¸ë¦¼ 5.5 ì„œë¸Œ ê³„ì •ì—ì„œ RAMì— ì§„ì…í•˜ì—¬ ë¦¬ì†ŒìŠ¤ ê³µìœ  ì´ˆëŒ€ í™•ì¸</p>
<ul>
<li>ë³¸ ê³„ì •ì—ì„œ ê³µìœ í•œ TGWë¥¼ ì„ íƒ í›„ ë¦¬ì†ŒìŠ¤ ê³µìœ  ìˆ˜ë½</li>
</ul>
<p><img src="/images/LabGuide-AWS-Transit-Gateway/Untitled18.png" alt="LabGuide%20AWS%20Transit%20Gateway%20efff213e58a546c5bc56273e4425244a/Untitled%2018.png"></p>
<p>ê·¸ë¦¼ 5.6 ì„œë¸Œ ê³„ì •ì—ì„œ ê³µìœ  ë¦¬ì†ŒìŠ¤ í™•ì¸</p>
<ul>
<li>ê³µìœ  ë¦¬ì†ŒìŠ¤ ë©”ë‰´ë¡œ ì ‘ê·¼í•˜ì—¬ ê³µìœ ëœ TGW ì •ë³´ í™•ì¸</li>
</ul>
<p>5.2.3) Multi Account VPC Attachment (ë³¸ ê³„ì • / ì„œë¸Œ ê³„ì •)</p>
<ul>
<li><p>VPC â€”&gt; Transit Gatewayë¡œ ì§„ì…í•˜ë©´ ê³µìœ  ë°›ì€ TGW ì •ë³´ í™•ì¸ (ì„œë¸Œ ê³„ì •)</p>
</li>
<li><p>VPC â€”&gt; Transit Gateway Attachment (ì„œë¸Œ ê³„ì •)</p>
<ul>
<li><p>Transit Gateway ID : ì§€ì •</p>
</li>
<li><p>Attachment Type : VPC</p>
</li>
<li><p>Attachment Name Tag : SUB-VPC03-ATT</p>
</li>
<li><p>VPC ID : MAIN-A â€”&gt; AZ &amp; Subnet ì§€ì •</p>
</li>
</ul>
</li>
<li><p>VPC â€”&gt; Transit Gateway Attachment â€”&gt; ì‘ì—… â€”&gt; Accept (ë³¸ ê³„ì •)</p>
</li>
</ul>
<p><img src="/images/LabGuide-AWS-Transit-Gateway/Untitled19.png" alt="LabGuide%20AWS%20Transit%20Gateway%20efff213e58a546c5bc56273e4425244a/Untitled%2019.png"></p>
<p>ê·¸ë¦¼ 5.7 ì„œë¸Œ ê³„ì •ì—ì„œ TGW Attachment ìƒíƒœ í™•ì¸</p>
<ul>
<li>ì„œë¸Œ ê³„ì •ì—ì„œ TGW VPC Attachmentë¥¼ ìˆ˜í–‰í•´ë„ ë°”ë¡œ ì—°ê²°ì´ ë˜ì§€ ì•Šê³  pending acceptance ìƒíƒœì´ë‹¤.</li>
<li>ë³¸ ê³„ì •ì— ì§„ì…í•˜ì—¬ Accept í•´ì¤€ë‹¤. (1~2ë¶„ í›„ ì„±ê³µ)</li>
</ul>
<p>5.3 Routing Table ì„¤ì • (ì„œë¸Œ ê³„ì •)</p>
<ul>
<li><p>CloudFormationì— ì˜í•´ ìƒì„±ëœ 2ê°œì˜ ë¼ìš°íŒ… í…Œì´ë¸”ì— ê²½ë¡œë¥¼ ì¶”ê°€í•œë‹¤.</p>
<ul>
<li>ë¼ìš°íŒ… í¸ì§‘ â€”&gt; ë¼ìš°íŒ… ì¶”ê°€ â€”&gt; 10.0.0.0/8 ëŒ€ì—­, tgw-xxxx íƒ€ê²Ÿ</li>
</ul>
</li>
</ul>
<p>5.4 Verify</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@MAIN-MGT ec2-user]<span class="comment"># ./pingall.sh</span></span><br><span class="line">node google.com is up</span><br><span class="line">node 10.1.1.10 is up</span><br><span class="line">node 10.2.1.10 is up</span><br><span class="line">node 10.2.2.10 is up</span><br><span class="line">node 10.3.1.10 is up</span><br><span class="line">node 10.3.2.10 is up</span><br><span class="line">node 10.4.1.10 is down</span><br><span class="line">node 10.5.1.10 is down</span><br><span class="line">node 10.6.1.10 is down</span><br><span class="line">[root@MAIN-MGT ec2-user]<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<ul>
<li>MAIN-MGT EC2ì— ì ‘ì†í•˜ì—¬ <code>pingall.sh</code> ìŠ¤í¬ë¦½íŠ¸ë¥¼ ìˆ˜í–‰í•œë‹¤.</li>
<li><code>ë²„ì§€ë‹ˆì•„</code> MAINê³¼ SUB SITEì— ì¡´ì¬í•˜ëŠ” EC2 ë¼ë¦¬ í†µì‹ ì´ ê°€ëŠ¥í•˜ë‹¤.</li>
</ul>
<details>
<summary><b>5ì¥ í˜„ì¬ê¹Œì§€ ì™„ë£Œëœ êµ¬ì„±ë„ í™•ì¸</summary></summary></b>
<div markdown="1">

<p><img src="/images/LabGuide-AWS-Transit-Gateway/Untitled20.png" alt="LabGuide%20AWS%20Transit%20Gateway%20efff213e58a546c5bc56273e4425244a/Untitled%2020.png"></p>
</div>
</details>

<hr>
<br>

<h3 id="6-AWS-Transit-Gateway-Inter-Region-Peering-Test"><a href="#6-AWS-Transit-Gateway-Inter-Region-Peering-Test" class="headerlink" title="6. AWS Transit Gateway Inter Region Peering Test"></a>6. AWS Transit Gateway Inter Region Peering Test</h3><ul>
<li><strong>ì´ ë²ˆ ë‹¨ê³„ì˜ ì‹¤ìŠµì€ MAIN SITE TGWì™€ ë‹¤ë¥¸ ë¦¬ì „ì— ìˆëŠ” BRANCH SITE TGWë¥¼ ì—°ê²°í•˜ì—¬  í…ŒìŠ¤íŠ¸í•œë‹¤. (Inter Region Peering TGW Attachment)</strong></li>
<li>ì°¸ê³ ë¡œ Inter-Regional-Peeringì€ <code>ë²„ì§€ë‹ˆì•„, ì˜¤í•˜ì´ì˜¤, ì˜¤ë ˆê³¤, ì•„ì¼ëœë“œ, í”„ë‘í¬í‘¸ë¥´íŠ¸</code> ë¦¬ì „ ì—ì„œë§Œ ì§€ì›í•œë‹¤.</li>
<li>ì‹¤ìŠµ í™˜ê²½: Region - <code>ì•„ì¼ëœë“œ</code> , Account - ë³¸ AWS ê³„ì •</li>
</ul>
<p><a href="https://aws.amazon.com/ko/blogs/aws/aws-transit-gateway-adds-multicast-and-inter-regional-peering/" target="_blank" rel="noopener">AWS Transit Gateway Adds Multicast and Inter-Regional Peering | Amazon Web Services</a></p>
<p>ì°¸ê³  ë§í¬ : AWS Transit Gateway Adds Multicast &amp; Inter Regional Peering</p>
<p>6.1 ì•„ì¼ëœë“œ CloufFormation ë°°í¬</p>
<p>6.1.1) CloudFormation ë°°í¬</p>
<ul>
<li>2.3í•­ì—ì„œ ì œê³µí•œ Ireland_TransitGW_Lab_CF.yaml íŒŒì¼ì„ ë°°í¬í•˜ì.</li>
</ul>
<details>
<summary>ì•„ì¼ëœë“œ CF ìƒì„± ì¸í”„ë¼</summary>
<div markdown="1">

<pre><code>- EC2-Instance 2ê°œ
- VPC 2ê°œ, Public Subnet 1ê°œ, Private Subnet 1ê°œ, Routing Table 2ê°œ, IGW 1ê°œ
- Security Group 2ê°œ
- Transit Gateway 1ê°œ, Transit Gateway Attachment 2ê°œ</code></pre></div>
</details>


<ul>
<li>ìœ„ ìƒì„±ëœ ì¸í”„ë¼ê°€ ì •ìƒì ìœ¼ë¡œ ì˜¬ë¼ì™”ëŠ” ì§€ í™•ì¸í•˜ì</li>
<li>ì•„ì¼ëœë“œì—ì„œ ì‚¬ìš©í•  ì¸í”„ë¼ë¥¼ CloudFormationì—ì„œ ëª¨ë‘ ì •ì˜í•˜ì˜€ë‹¤. (TGWê¹Œì§€ í¬í•¨)</li>
<li>Routing Table ì¶”ê°€ëŠ” ì •ì˜í•˜ì§€ ì•Šì•„ ìˆ˜ë™ìœ¼ë¡œ ì‘ì—… (ğŸ¤¢TGW ìƒì„± ë° Attachment ë˜ëŠ” ë”œë ˆì´ê°€ ë°œìƒí•˜ì—¬ ê²½ë¡œ ì„¤ì •ì„ ëª»í•˜ê³  íƒ€ì„ ì•„ì›ƒ)</li>
</ul>
<p>6.2 Inter Region Peering ì„¤ì •</p>
<p>6.2.1) TGW Attachment - Inter Region Peering </p>
<ul>
<li><p>VPC â€”&gt; Transit Gateway Attachment â€”&gt; Create Transit Gateway Attachment (<code>ì•„ì¼ëœë“œ</code>)</p>
<ul>
<li><p>Transit Gateway ID : BRC-TGW ëŒ€ìƒ ì§€ì •</p>
</li>
<li><p>Attachment Type : Peering</p>
</li>
<li><p>Attachment Name Tag : MAIN-TGW-ATT</p>
</li>
<li><p>Region : N. Virginia</p>
</li>
<li><p>Transit Gateway (accepter) : MAIN-TGW ëŒ€ìƒ ì§€ì • (<code>ë²„ì§€ë‹ˆì•„</code>ì— ì§‘ì…í•˜ì—¬ TGW IDë¥¼ í™•ì¸ í›„ ì§ì ‘ ì…ë ¥í•´ì•¼ í•œë‹¤)</p>
</li>
</ul>
</li>
</ul>
<p><img src="/images/LabGuide-AWS-Transit-Gateway/Untitled21.png" alt="LabGuide%20AWS%20Transit%20Gateway%20efff213e58a546c5bc56273e4425244a/Untitled%2021.png"></p>
<p>ê·¸ë¦¼ 6.1 ì•„ì¼ëœë“œ ë¦¬ì „ì—ì„œ Inter Region Peering ì„¤ì •</p>
<p><img src="/images/LabGuide-AWS-Transit-Gateway/Untitled22.png" alt="LabGuide%20AWS%20Transit%20Gateway%20efff213e58a546c5bc56273e4425244a/Untitled%2022.png"></p>
<p>ê·¸ë¦¼ 6.2 Transit Gateway Attachment Inter Region Peering ì€ ë°”ë¡œ ì ìš©ì´ ë˜ì§€ ì•ŠìŒ (ë²„ì§€ë‹ˆì•„ì—ì„œ ìˆ˜ë½)</p>
<ul>
<li>VPC â€”&gt; Transit Gateway Attachment â€”&gt; ëŒ€ìƒ ì§€ì • â€”&gt; ì‘ì—… â€”&gt; Accept (<code>ë²„ì§€ë‹ˆì•„</code>)</li>
</ul>
<p><img src="/images/LabGuide-AWS-Transit-Gateway/Untitled23.png" alt="LabGuide%20AWS%20Transit%20Gateway%20efff213e58a546c5bc56273e4425244a/Untitled%2023.png"></p>
<p>ê·¸ë¦¼ 6.3 Transit Gateway Attachment Inter Region Peering í™•ì¸</p>
<ul>
<li>Inter Region Peering Attachment ëœ ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆë‹¤. (êµ¬ë¶„ì„ ìœ„í•´ BRC-TGW-ATTë¡œ Tagí•¨)</li>
</ul>
<p>6.3 Routing Table ì„¤ì •</p>
<p>6.3.1) BRANCH SITE VPCì˜ Routing Table ì„¤ì •</p>
<ul>
<li><p>CloudFormationì— ì˜í•´ ìƒì„±ëœ 2ê°œì˜ ë¼ìš°íŒ… í…Œì´ë¸”ì— ê²½ë¡œë¥¼ ì¶”ê°€í•œë‹¤.</p>
<ul>
<li>ë¼ìš°íŒ… í¸ì§‘ â€”&gt; ë¼ìš°íŒ… ì¶”ê°€ â€”&gt; 10.0.0.0/8 ëŒ€ì—­, tgw-xxxx íƒ€ê²Ÿ</li>
</ul>
</li>
</ul>
<p>6.3.2) MAIN-TGWì˜ Routing Table ì„¤ì •</p>
<ul>
<li><p>VPC â€”&gt; Transit Gateway Routing Table â€”&gt; ëŒ€ìƒ ì„ íƒ â€”&gt; Route íƒ­ â€”&gt; Create Route</p>
<ul>
<li>10.0.0.0/8 ëŒ€ì—­, BRANCH-TGW íƒ€ê²Ÿ (tgw-xxxx)</li>
</ul>
</li>
</ul>
<p>6.3.3) BRANCH-TGWì˜ Routing Table ì„¤ì •</p>
<ul>
<li><p>VPC â€”&gt; Transit Gateway Routing Table â€”&gt; ëŒ€ìƒ ì„ íƒ â€”&gt; Route íƒ­ â€”&gt; Create Route</p>
<ul>
<li>10.0.0.0/8 ëŒ€ì—­, MAIN-TGW íƒ€ê²Ÿ (tgw-xxxx)</li>
</ul>
</li>
</ul>
<p>6.4 Verify</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[ec2-user@MAIN-MGT ~]$ ./pingall.sh</span><br><span class="line">node google.com is up</span><br><span class="line">node 10.1.1.10 is up</span><br><span class="line">node 10.2.1.10 is up</span><br><span class="line">node 10.2.2.10 is up</span><br><span class="line">node 10.3.1.10 is up</span><br><span class="line">node 10.3.2.10 is up</span><br><span class="line">node 10.4.1.10 is up</span><br><span class="line">node 10.5.1.10 is up</span><br><span class="line">node 10.6.1.10 is down</span><br><span class="line">[ec2-user@MAIN-MGT ~]$</span><br></pre></td></tr></table></figure>

<ul>
<li>MAIN-MGT EC2ì— ì ‘ì†í•˜ì—¬ <code>pingall.sh</code> ìŠ¤í¬ë¦½íŠ¸ë¥¼ ìˆ˜í–‰í•œë‹¤.</li>
<li><code>ë²„ì§€ë‹ˆì•„</code> MAIN / SUB / BRANCH SITEì— ì¡´ì¬í•˜ëŠ” EC2 ë¼ë¦¬ í†µì‹ ì´ ê°€ëŠ¥í•˜ë‹¤.</li>
</ul>
<details>
<summary><b>6ì¥ í˜„ì¬ê¹Œì§€ ì™„ë£Œëœ êµ¬ì„±ë„ í™•ì¸</summary></summary></b>
<div markdown="1">

<p><img src="/images/LabGuide-AWS-Transit-Gateway/Untitled24.png" alt="LabGuide%20AWS%20Transit%20Gateway%20efff213e58a546c5bc56273e4425244a/Untitled%2024.png"></p>
</div>
</details>

<hr>
<br>

<h3 id="7-AWS-Transit-Gateway-VPN-Attachment"><a href="#7-AWS-Transit-Gateway-VPN-Attachment" class="headerlink" title="7. AWS Transit Gateway VPN Attachment"></a>7. AWS Transit Gateway VPN Attachment</h3><ul>
<li><strong>ì´ ë²ˆ ë‹¨ê³„ì˜ ì‹¤ìŠµì€ MAIN SITE TGWì™€ ë‹¤ë¥¸ ë¦¬ì „ì— ìˆëŠ” Site-to-Site VPNì„ ì—°ê²°í•˜ëŠ”  í…ŒìŠ¤íŠ¸ë¥¼ í•œë‹¤. (AWS Transit Gateway VPN Attachment)</strong></li>
<li>ì„œìš¸ ë¦¬ì „ì— VPCë¥¼ ìƒì„±í•˜ì—¬ VPN ì„œë²„ë¥¼ ë°°ì¹˜í•˜ëŠ”ë°, ê°€ìƒìœ¼ë¡œ On-Premise í™˜ê²½ì´ë¼ ê°€ì •í•˜ì—¬ í…ŒìŠ¤íŠ¸ í•œë‹¤.</li>
<li>ì‹¤ìŠµ í™˜ê²½: Region - <code>ë²„ì§€ë‹ˆì•„, ì„œìš¸</code> , Account - ë³¸ AWS ê³„ì •</li>
</ul>
<p>7.1 ì„œìš¸ CloufFormation ë°°í¬</p>
<p>7.1.1) CloudFormation ë°°í¬</p>
<ul>
<li><p>2.3í•­ì—ì„œ ì œê³µí•œ Seoul_TransitGW_Lab_CF.yaml íŒŒì¼ì„ ë°°í¬í•˜ì.</p>
</li>
<li><p>ì„œìš¸ CF ìƒì„± ì¸í”„ë¼</p>
<ul>
<li><p>EC2-Instance 1ê°œ</p>
</li>
<li><p>VPC 1ê°œ, Public Subnet 1ê°œ, Routing Table 1ê°œ, IGW 1ê°œ</p>
</li>
<li><p>Security Group 1ê°œ</p>
</li>
</ul>
</li>
<li><p>ìœ„ ìƒì„±ëœ ì¸í”„ë¼ê°€ ì •ìƒì ìœ¼ë¡œ ì˜¬ë¼ì™”ëŠ” ì§€ í™•ì¸í•˜ì.</p>
</li>
</ul>
<p>7.2 AWS Site to Site VPN ì„¤ì •</p>
<p>7.2.1) Custom Gateway ìƒì„±</p>
<ul>
<li><p>VPC â€”&gt; VPN â€”&gt; ê³ ê° ê²Œì´íŠ¸ì›¨ì´ â€”&gt; ê³ ê° ê²Œì´íŠ¸ì›¨ì´ ìƒì„± (<code>ë²„ì§€ë‹ˆì•„</code>)</p>
<ul>
<li><p>ì´ë¦„ : CloudNeta-CGW</p>
</li>
<li><p>ë¼ìš°íŒ… : ì •ì </p>
</li>
<li><p>IP ì£¼ì†Œ : <code>ì„œìš¸</code>ì— ìœ„ì¹˜í•œ EC2 Public IP ì£¼ì†Œ</p>
</li>
</ul>
</li>
</ul>
<p>7.2.2) TGW VPN Attachment</p>
<ul>
<li><p>VPC â€”&gt; Transit Gateway Attachment â€”&gt; ì‚¬ì´íŠ¸ ê°„ VPN ì—°ê²° â€”&gt; VPN ì—°ê²° ìƒì„± (<code>ë²„ì§€ë‹ˆì•„</code>)</p>
<ul>
<li><p>Transit Gateway ID : MAIN-TGW ì„ íƒ</p>
</li>
<li><p>Attachment Type : VPN</p>
</li>
</ul>
<hr>
<ul>
<li><p>ê³ ê° ê²Œì´íŠ¸ì›¨ì´ : Existing</p>
</li>
<li><p>Customer Gateway ID : ìƒì„±í•œ CGW ì„ íƒ</p>
</li>
</ul>
<hr>
<ul>
<li>ë¼ìš°íŒ… ì˜µì…˜ : ì •ì </li>
</ul>
</li>
</ul>
<p><img src="/images/LabGuide-AWS-Transit-Gateway/Untitled25.png" alt="LabGuide%20AWS%20Transit%20Gateway%20efff213e58a546c5bc56273e4425244a/Untitled%2025.png"></p>
<p>7.2.3) VPN êµ¬ì„± ë‹¤ìš´ë¡œë“œ</p>
<ul>
<li>VPC â€”&gt; VPN â€”&gt; ì‚¬ì´íŠ¸ ê°„ VPNì— ì ‘ê·¼í•œë‹¤</li>
<li>ì¼ì • ì‹œê°„ì´ ì§€ë‚˜ë©´ Site to Site VPN ì—°ê²° ìƒíƒœëŠ” ì‚¬ìš© ê°€ëŠ¥ ìƒíƒœë¡œ ì „í™˜ëœë‹¤.</li>
<li>AWSì—ì„œëŠ” ì—°ê²° í•  ìƒëŒ€ë°© VPN ì„œë²„ì— ëŒ€í•œ êµ¬ì„± ì •ë³´ë¥¼ ì¹œì ˆíˆ ì œê³µí•˜ê³  ìˆë‹¤.</li>
<li>êµ¬ì„± ë‹¤ìš´ë¡œë“œ  â€”&gt; ê³µê¸‰ì—…ì²´ : Openswan ì„ íƒ</li>
</ul>
<p><img src="/images/LabGuide-AWS-Transit-Gateway/Untitled26.png" alt="LabGuide%20AWS%20Transit%20Gateway%20efff213e58a546c5bc56273e4425244a/Untitled%2026.png"></p>
<p>7.3 OpenSwan VPN ì„œë²„ ì„¤ì •</p>
<ul>
<li><code>ì„œìš¸</code>ì— ìƒì„±í•œ EC2-Instanceì— SSH ì ‘ì†ì„ í•œë‹¤.</li>
</ul>
<p>7.3.1) aws-vpn.conf ìƒì„± ë° ì…ë ¥</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[ec2-user@OPM-VPN ~]$ sudo su</span><br><span class="line">[root@OPM-VPN ec2-user]<span class="comment">#</span></span><br><span class="line">[root@OPM-VPN ec2-user]<span class="comment"># vi /etc/ipsec.d/aws-vpn.conf</span></span><br></pre></td></tr></table></figure>

<ul>
<li>vi í¸ì§‘ê¸° ëª¨ë“œë¡œ <code>/etc/ipsec.d/aws-vpn.conf</code> íŒŒì¼ì„ ìƒì„±í•˜ì—¬ ì ‘ê·¼í•œë‹¤.</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/ipsec.d/aws-vpn.conf</span><br><span class="line">--------------------------------------------------------------------------</span><br><span class="line">conn Tunnel1</span><br><span class="line">	authby=secret</span><br><span class="line">	auto=start</span><br><span class="line">	left=%defaultroute</span><br><span class="line">	leftid=54.180.131.143</span><br><span class="line">	right=34.231.125.200</span><br><span class="line">	<span class="built_in">type</span>=tunnel</span><br><span class="line">	ikelifetime=8h</span><br><span class="line">	keylife=1h</span><br><span class="line">	phase2alg=aes128-sha1;modp1024</span><br><span class="line">	ike=aes128-sha1;modp1024</span><br><span class="line">	~~auth=esp~~ ì‚­ì œ</span><br><span class="line">	keyingtries=%forever</span><br><span class="line">	keyexchange=ike</span><br><span class="line">	leftsubnet=&lt;LOCAL NETWORK&gt; 10.6.0.0/16 ìœ¼ë¡œ ì…ë ¥</span><br><span class="line">	rightsubnet=&lt;REMOTE NETWORK&gt; 10.0.0.0/8 ìœ¼ë¡œ ì…ë ¥</span><br><span class="line">	dpddelay=10</span><br><span class="line">	dpdtimeout=30</span><br><span class="line">	dpdaction=restart_by_peer</span><br></pre></td></tr></table></figure>

<ul>
<li><p>í•´ë‹¹ ì½”ë“œ ì •ë³´ëŠ” <strong>7.2.3í•­ì—ì„œ ë‹¤ìš´ ë°›ì€ TXT íŒŒì¼ì—ì„œ 4í•­ì˜ ë‚´ìš©</strong>ì„ ì‚¬ìš©í•œë‹¤. (â˜¢ ìœ„ ì½”ë“œ ê°’ì„ ë„£ìœ¼ë¼ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ê°ì ë‹¤ìš´ë°›ì€ TXT íŒŒì¼ì„ ì°¸ì¡°í•´ì„œ ì„¤ì •)</p>
</li>
<li><p><em>ì½”ë“œ ë‚´ìš© ì¤‘ ìˆ˜ì •ì´ í•„ìš”í•œ ì‚¬í•­</em></p>
<ul>
<li><p>LOCAL NETWORKëŠ” VPC-OPMì˜ ëŒ€ì—­ìœ¼ë¡œ 10.6.0.0/16 ì…ë ¥í•œë‹¤.</p>
</li>
<li><p>REMOTE NETWORKëŠ” AWS ëŒ€ì—­ìœ¼ë¡œ 10.0.0.0/8 ì…ë ¥í•œë‹¤.</p>
</li>
<li><p>auto=esp ì‚­ì œ</p>
</li>
<li><p>ë‚˜ë¨¸ì§€ëŠ” ìˆëŠ” ê·¸ëŒ€ë¡œ ì‚¬ìš©</p>
</li>
</ul>
</li>
</ul>
<p>7.3.2) aws-vpn.secrets ìƒì„±</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@OPM-VPN ec2-user]<span class="comment"># vi /etc/ipsec.d/aws-vpn.secrets</span></span><br></pre></td></tr></table></figure>

<ul>
<li>vi í¸ì§‘ê¸° ëª¨ë“œë¡œ <code>/etc/ipsec.d/aws-vpn.secrets</code> íŒŒì¼ì„ ìƒì„±í•˜ì—¬ ì ‘ê·¼í•œë‹¤.</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/ipsec.d/aws-vpn.conf</span><br><span class="line">--------------------------------------------------------------------------</span><br><span class="line">54.180.131.143 34.231.125.200: PSK <span class="string">"DWJ2n0smRq6gDlMUuIweGa45m8c_RvZ3"</span></span><br></pre></td></tr></table></figure>

<ul>
<li>í•´ë‹¹ ì½”ë“œ ì •ë³´ëŠ” <strong>7.2.3í•­ì—ì„œ ë‹¤ìš´ ë°›ì€ TXT íŒŒì¼ì—ì„œ 5í•­ì˜ ë‚´ìš©</strong>ì„ ì‚¬ìš©í•œë‹¤. (â˜¢ ìœ„ ì½”ë“œ ê°’ì„ ë„£ìœ¼ë¼ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ê°ì ë‹¤ìš´ë°›ì€ TXT íŒŒì¼ì„ ì°¸ì¡°í•´ì„œ ì„¤ì •)</li>
</ul>
<p>7.3.3) OpenSwan VPN ì„œë²„ ì‹œì‘</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@OPM-VPN ec2-user]<span class="comment"># chkconfig ipsec on</span></span><br><span class="line">:</span><br><span class="line">[root@OPM-VPN ec2-user]<span class="comment"># service ipsec start</span></span><br><span class="line">:</span><br><span class="line">[root@OPM-VPN ec2-user]<span class="comment"># service ipsec status</span></span><br><span class="line">Redirecting to /bin/systemctl status ipsec.service</span><br><span class="line">â— ipsec.service - Internet Key Exchange (IKE) Protocol Daemon <span class="keyword">for</span> IPsec</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/ipsec.service; enabled; vendor preset: disabled)</span><br><span class="line">   Active: active (running) since Fri 2020-05-08 07:49:18 UTC; 10s ago</span><br><span class="line">     Docs: man:ipsec(8)</span><br><span class="line">           man:pluto(8)</span><br><span class="line">           man:ipsec.conf(5)</span><br><span class="line">  Process: 4718 ExecStopPost=/usr/sbin/ipsec --stopnflog (code=exited, status=0/SUCCESS)</span><br><span class="line">:</span><br></pre></td></tr></table></figure>

<ul>
<li>OpenSwanì˜ ìƒíƒœê°€ Active ì„ì„ í™•ì¸ í•œë‹¤.</li>
</ul>
<p><img src="/images/LabGuide-AWS-Transit-Gateway/Untitled27.png" alt="LabGuide%20AWS%20Transit%20Gateway%20efff213e58a546c5bc56273e4425244a/Untitled%2027.png"></p>
<ul>
<li>ë²„ì§€ë‹ˆì•„ Site to Site VPN ìƒíƒœë¥¼ ë³´ë©´ Tunnel 1ì´ ì‘ë™ ìƒíƒœë¡œ ì˜¬ë¼ì™”ë‹¤.</li>
</ul>
<p>7.4 TGW ë¼ìš°íŒ… í…Œì´ë¸” ì„¤ì •</p>
<ul>
<li><p>Transit Gateway ë¼ìš°íŒ… í…Œì´ë¸”ì—ì„œ On-Premise ëŒ€ì—­ì— ëŒ€í•œ ë¼ìš°íŒ…ì„ ì¡ì•„ì•¼ í•œë‹¤.</p>
</li>
<li><p>VPC â€”&gt; Transit Gateway ë¼ìš°íŒ… í…Œì´ë¸” â€”&gt; TGW ëŒ€ìƒ ì§€ì • â€”&gt; Route íƒ­ â€”&gt; Create Route</p>
<ul>
<li><p>CIDR : 10.6.0.0/16</p>
</li>
<li><p>Choose Attachment : ìœ„ì— ìƒì„±í•œ VPN Attachment ì§€ì •</p>
<p><img src="/images/LabGuide-AWS-Transit-Gateway/Untitled28.png" alt="LabGuide%20AWS%20Transit%20Gateway%20efff213e58a546c5bc56273e4425244a/Untitled%2028.png"></p>
</li>
</ul>
</li>
</ul>
<p>7.5 Verify</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@MAIN-MGT ec2-user]<span class="comment"># ./pingall.sh</span></span><br><span class="line">node google.com is up</span><br><span class="line">node 10.1.1.10 is up</span><br><span class="line">node 10.2.1.10 is up</span><br><span class="line">node 10.2.2.10 is up</span><br><span class="line">node 10.3.1.10 is up</span><br><span class="line">node 10.3.2.10 is up</span><br><span class="line">node 10.4.1.10 is up</span><br><span class="line">node 10.5.1.10 is up</span><br><span class="line">node 10.6.1.10 is up</span><br><span class="line">[root@MAIN-MGT ec2-user]<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<ul>
<li>MAIN-MGT EC2ì— ì ‘ì†í•˜ì—¬ <code>pingall.sh</code> ìŠ¤í¬ë¦½íŠ¸ë¥¼ ìˆ˜í–‰í•œë‹¤.</li>
<li>ë“œë””ì–´ ëª¨ë“  êµ¬ê°„ìœ¼ë¡œ í†µì‹ ì´ ê°€ëŠ¥í•˜ë‹¤.</li>
</ul>
<details>
<summary><b>7ì¥ í˜„ì¬ê¹Œì§€ ì™„ë£Œëœ êµ¬ì„±ë„ í™•ì¸</summary></summary></b>
<div markdown="1">

<p><img src="/images/LabGuide-AWS-Transit-Gateway/Untitled29.png" alt="LabGuide%20AWS%20Transit%20Gateway%20efff213e58a546c5bc56273e4425244a/Untitled%2029.png"></p>
</div>
</details>

<hr>
<br>

<h3 id="8-NAT-Gateway-through-AWS-Transit-Gateway"><a href="#8-NAT-Gateway-through-AWS-Transit-Gateway" class="headerlink" title="8. NAT Gateway through AWS Transit Gateway"></a>8. NAT Gateway through AWS Transit Gateway</h3><ul>
<li><strong>ì´ ë²ˆ ë‹¨ê³„ì˜ ì‹¤ìŠµì€ Private Subnetì— ì¡´ì¬í•˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ TGWë¥¼ í†µí•´ MAIN SITEì˜ Egress VPCì— ì¡´ì¬í•˜ëŠ” NAT GWë¥¼ í†µí•´ ì™¸ë¶€ ì¸í„°ë„· í†µì‹ ì„ í…ŒìŠ¤íŠ¸í•œë‹¤.</strong></li>
<li>ë³¸ ì‹¤ìŠµì—ì„œ Private Subnetì€ í¬ê²Œ TEST í™˜ê²½ê³¼ DEV í™˜ê²½ìœ¼ë¡œ êµ¬ë¶„í•  ìˆ˜ ìˆë‹¤. ì´ ì¤‘ì— DEV í™˜ê²½ë§Œ NAT GWë¥¼ í†µí•´ ì™¸ë¶€ ì¸í„°ë„· í†µì‹ ì„í•˜ê³ , TEST í™˜ê²½ì€ íì‡„ë§ ì„±ê²©ìœ¼ë¡œ ì™¸ë¶€ ì¸í„°ë„· í†µì‹ ì„ í•˜ì§€ ì•Šë„ë¡ í•˜ëŠ” ì»¨ì…‰ì´ë‹¤.</li>
<li>ì‹¤ìŠµ í™˜ê²½: Region - <code>ë²„ì§€ë‹ˆì•„</code> , Account - ë³¸ AWS ê³„ì • + ì„œë¸Œ AWS ê³„ì •</li>
</ul>
<p>8.1 ë²„ì§€ë‹ˆì•„ CloufFormation ë°°í¬</p>
<p>8.1.1) CloudFormation ë°°í¬</p>
<ul>
<li>2.3í•­ì—ì„œ ì œê³µí•œ Virginia_TransitGW_Lab_CF.yaml íŒŒì¼ì„ ë°°í¬í•˜ì.</li>
</ul>
<blockquote>
<p>â˜ ì£¼ì˜: CF Conditionì— ì˜í•´ <strong>íŒŒë¼ë¯¸í„° ê°’ì„ Natë¡œ ì§€ì •</strong>í•˜ì!</p>
</blockquote>
<p><img src="/images/LabGuide-AWS-Transit-Gateway/Untitled30.png" alt="LabGuide%20AWS%20Transit%20Gateway%20efff213e58a546c5bc56273e4425244a/Untitled%2030.png"><br>ê·¸ë¦¼ 8.1 NAT ìš©ë„ì˜ CloudFormation ìƒì„± (EnvTypeì„ Natë¡œ ì§€ì •)</p>
<details>
<summary>ë²„ì§€ë‹ˆì•„ CF ìƒì„± ì¸í”„ë¼ (NAT)</summary>
<div markdown="1">

<pre><code>- NAT Gateway 1ê°œ

- VPC 1ê°œ, Public Subnet 1ê°œ, Private Subnet 1ê°œ, Routing Table 2ê°œ, IGW 1ê°œ</code></pre></div>
</details>

<ul>
<li>ìœ„ ìƒì„±ëœ ì¸í”„ë¼ê°€ ì •ìƒì ìœ¼ë¡œ ì˜¬ë¼ì™”ëŠ” ì§€ í™•ì¸í•˜ì.</li>
</ul>
<p>8.2 TGW Attachment</p>
<ul>
<li><p>VPC â€”&gt; Transit Gateway Attachment â€”&gt; Create Transit Gateway Attachment</p>
<ul>
<li><p>Transit Gateway ID ì§€ì •</p>
</li>
<li><p>Attachment Type : VPC</p>
</li>
<li><p>Attachment Name Tag : MAIN-VPCEG-ATT</p>
</li>
<li><p>VPC ID : VPC01 â€”&gt; AZ &amp; Subnet ì§€ì •</p>
</li>
</ul>
</li>
</ul>
<p>8.3 Routing Table ì„¤ì •</p>
<p>8.3.1) DEV í™˜ê²½ì˜ ë¼ìš°íŒ… ì„¤ì •</p>
<ul>
<li><p>DEV í™˜ê²½ì€ MAIN-DEVì™€ SUB-DEV 2êµ°ë°ë§Œ ì„¤ì • ì´ë‹¤.</p>
</li>
<li><p>VPC â€”&gt; ë¼ìš°íŒ… í…Œì´ë¸” â€”&gt; ëŒ€ìƒ ì§€ì • (ë³¸ ê³„ì •, ì„œë¸Œê³„ì • ëª¨ë‘ ì„¤ì •)</p>
<ul>
<li>ë¼ìš°íŒ… í¸ì§‘ â€”&gt; ë¼ìš°íŒ… ì¶”ê°€ â€”&gt; 0.0.0.0/0 ëŒ€ì—­, TGW íƒ€ê²Ÿ(tgw-xxxx)</li>
</ul>
</li>
</ul>
<p>8.3.2) TGWì˜ ë¼ìš°íŒ…ì„¤ì •</p>
<ul>
<li><p>VPC â€”&gt; Transit Gateway ë¼ìš°íŒ… í…Œì´ë¸” â€”&gt; ëŒ€ìƒ ì§€ì • â€”&gt; Route íƒ­ â€”&gt; Create Route</p>
<ul>
<li>0.0.0.0/0 ëŒ€ì—­, MAIN-VPCEG-ATT ëŒ€ìƒ ì§€ì •</li>
</ul>
</li>
</ul>
<p>8.3.3) VPCEGì˜ Privateì™€ Public ë¼ìš°íŒ… ì„¤ì • (2 êµ°ë° ì„¤ì •)</p>
<ul>
<li><p>VPC â€”&gt; ë¼ìš°íŒ… í…Œì´ë¸” â€”&gt; ëŒ€ìƒ ì§€ì •</p>
<ul>
<li>ë¼ìš°íŒ… í¸ì§‘ â€”&gt; ë¼ìš°íŒ… ì¶”ê°€ â€”&gt; 10.0.0.0/8 ëŒ€ì—­, TGW íƒ€ê²Ÿ(tgw-xxxx)</li>
</ul>
</li>
</ul>
<p>8.3 Verify</p>
<ul>
<li>MAIN-TEST, MAIN-DEV, SUB-TEST, SUB-DEVì— SSHë¡œ ì ‘ê·¼í•˜ì—¬ pingall.sh ìˆ˜í–‰ (rootê³„ì • ì•”í˜¸: qwe123)</li>
</ul>
<p>8.3.1) MAIN-TEST í…ŒìŠ¤íŠ¸</p>
<ul>
<li><p>View Result</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@MAIN-TEST ~]<span class="comment"># ./pingall.sh</span></span><br><span class="line">node google.com is down</span><br><span class="line">node 10.1.1.10 is up</span><br><span class="line">node 10.2.1.10 is up</span><br><span class="line">node 10.2.2.10 is up</span><br><span class="line">node 10.3.1.10 is up</span><br><span class="line">node 10.3.2.10 is up</span><br><span class="line">node 10.4.1.10 is up</span><br><span class="line">node 10.5.1.10 is up</span><br><span class="line">node 10.6.1.10 is up</span><br><span class="line">[root@MAIN-TEST ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<ul>
<li>ë‚´ë¶€ ì¸í”„ë¼ì™€ëŠ”í†µì‹ ë˜ì§€ë§Œ ì™¸ë¶€ ì¸í„°ë„· í†µì‹ ì€ ë¶ˆê°€í•˜ë‹¤.</li>
</ul>
</li>
</ul>
<p>8.3.2) MAIN-DEV í…ŒìŠ¤íŠ¸</p>
<ul>
<li><p>View Result</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@MAIN-DEV ~]<span class="comment"># ./pingall.sh</span></span><br><span class="line">node google.com is up</span><br><span class="line">node 10.1.1.10 is up</span><br><span class="line">node 10.2.1.10 is up</span><br><span class="line">node 10.2.2.10 is up</span><br><span class="line">node 10.3.1.10 is up</span><br><span class="line">node 10.3.2.10 is up</span><br><span class="line">node 10.4.1.10 is up</span><br><span class="line">node 10.5.1.10 is up</span><br><span class="line">node 10.6.1.10 is up</span><br><span class="line">[root@MAIN-DEV ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<ul>
<li>ëª¨ë“  ì˜ì—­ìœ¼ë¡œ í†µì‹ ì´ ê°€ëŠ¥í•˜ë‹¤.</li>
</ul>
</li>
</ul>
<p>8.3.3) SUB-TEST í…ŒìŠ¤íŠ¸</p>
<ul>
<li><p>View Result</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@SUB-TEST ~]<span class="comment"># ./pingall.sh</span></span><br><span class="line">node google.com is down</span><br><span class="line">node 10.1.1.10 is up</span><br><span class="line">node 10.2.1.10 is up</span><br><span class="line">node 10.2.2.10 is up</span><br><span class="line">node 10.3.1.10 is up</span><br><span class="line">node 10.3.2.10 is up</span><br><span class="line">node 10.4.1.10 is up</span><br><span class="line">node 10.5.1.10 is up</span><br><span class="line">node 10.6.1.10 is up</span><br><span class="line">[root@SUB-TEST ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<ul>
<li>ë‚´ë¶€ ì¸í”„ë¼ì™€ëŠ”í†µì‹ ë˜ì§€ë§Œ ì™¸ë¶€ ì¸í„°ë„· í†µì‹ ì€ ë¶ˆê°€í•˜ë‹¤.</li>
</ul>
</li>
</ul>
<p>8.3.4) SUB-DEV í…ŒìŠ¤íŠ¸</p>
<ul>
<li><p>View Result</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@SUB-DEV ~]<span class="comment"># ./pingall.sh</span></span><br><span class="line">node google.com is up</span><br><span class="line">node 10.1.1.10 is up</span><br><span class="line">node 10.2.1.10 is up</span><br><span class="line">node 10.2.2.10 is up</span><br><span class="line">node 10.3.1.10 is up</span><br><span class="line">node 10.3.2.10 is up</span><br><span class="line">node 10.4.1.10 is up</span><br><span class="line">node 10.5.1.10 is up</span><br><span class="line">node 10.6.1.10 is up</span><br><span class="line">[root@SUB-DEV ~]<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<ul>
<li>ëª¨ë“  ì˜ì—­ìœ¼ë¡œ í†µì‹ ì´ ê°€ëŠ¥í•˜ë‹¤.</li>
</ul>
</li>
</ul>
<details>
<summary><b>8ì¥ í˜„ì¬ê¹Œì§€ ì™„ë£Œëœ êµ¬ì„±ë„ í™•ì¸</summary></summary></b>
<div markdown="1">

<p><img src="/images/LabGuide-AWS-Transit-Gateway/Untitled31.png" alt="LabGuide%20AWS%20Transit%20Gateway%20efff213e58a546c5bc56273e4425244a/Untitled%2031.png"></p>
</div>
</details>

<hr>
<br>

<h3 id="9-AWS-Transit-Gateway-Network-Manager"><a href="#9-AWS-Transit-Gateway-Network-Manager" class="headerlink" title="9. AWS Transit Gateway Network Manager"></a>9. AWS Transit Gateway Network Manager</h3><ul>
<li><strong>ì´ ë²ˆ ë‹¨ê³„ì˜ ì‹¤ìŠµì€ TGW Network Manager ê¸°ëŠ¥ì„ í†µí•´ ê°€ì‹œì„± ìˆê²Œ Global Networkë¥¼ ëª¨ë‹ˆí„°ë§í•œë‹¤.</strong></li>
</ul>
<p>9.1 Create Global Network</p>
<ul>
<li><p>VPC â€”&gt; Transit Gateway â€”&gt; ë„¤íŠ¸ì›Œí¬ ê´€ë¦¬ì â€”&gt; Create a Global Network</p>
<ul>
<li>ì´ë¦„ : CloudNeta-GN</li>
</ul>
</li>
</ul>
<p>9.2 Transit Gateway ë“±ë¡</p>
<ul>
<li><p>ë„¤íŠ¸ì›Œí¬ ê´€ë¦¬ì ë°ì‹œë³´ë“œì—ì„œ ì „ì†¡ ê²Œì´íŠ¸ì›¨ì´ ì¶”ê°€í•œë‹¤.</p>
<ul>
<li><p>CloudNeta-MAIN-TGW</p>
</li>
<li><p>BRC-TGW</p>
</li>
</ul>
</li>
</ul>
<p><img src="/images/LabGuide-AWS-Transit-Gateway/Untitled32.png" alt="LabGuide%20AWS%20Transit%20Gateway%20efff213e58a546c5bc56273e4425244a/Untitled%2032.png"></p>
<p>ê·¸ë¦¼ 9.1 TGW Global Network ë„¤íŠ¸ì›Œí¬ ê´€ë¦¬ìì—ì„œ Transit Gateway ë“±ë¡</p>
<p>9.3 Verify</p>
<p>9.3.1) ì§€ë¦¬ì  ì •ë³´</p>
<p><img src="/images/LabGuide-AWS-Transit-Gateway/Untitled33.png" alt="LabGuide%20AWS%20Transit%20Gateway%20efff213e58a546c5bc56273e4425244a/Untitled%2033.png"></p>
<p>ê·¸ë¦¼ 9.2 TGWì˜ ì§€ë¦¬ì  ìœ„ì¹˜ í‘œí˜„</p>
<p>9.3.2) í† í´ë¡œì§€</p>
<p><img src="/images/LabGuide-AWS-Transit-Gateway/Untitled34.png" alt="LabGuide%20AWS%20Transit%20Gateway%20efff213e58a546c5bc56273e4425244a/Untitled%2034.png"></p>
<p>ê·¸ë¦¼ 9.3 Global Network ì—°ê²° í† í´ë¡œì§€ í™•ì¸</p>
<p>9.3.4) ëª¨ë‹ˆí„°ë§</p>
<p><img src="/images/LabGuide-AWS-Transit-Gateway/Untitled35.png" alt="LabGuide%20AWS%20Transit%20Gateway%20efff213e58a546c5bc56273e4425244a/Untitled%2035.png"></p>
<p>ê·¸ë¦¼ 9.4 Global Network ëª¨ë‹ˆí„°ë§ ì •ë³´</p>
<p>9.3.5) Route Analyzer</p>
<p><img src="/images/LabGuide-AWS-Transit-Gateway/Untitled36.png" alt="LabGuide%20AWS%20Transit%20Gateway%20efff213e58a546c5bc56273e4425244a/Untitled%2036.png"></p>
<p>ê·¸ë¦¼ 9.5 ê²½ë¡œ ë¶„ì„ê¸° (Route Analyzer) ì •ë³´ ì…ë ¥</p>
<p><img src="/images/LabGuide-AWS-Transit-Gateway/Untitled37.png" alt="LabGuide%20AWS%20Transit%20Gateway%20efff213e58a546c5bc56273e4425244a/Untitled%2037.png"><br>ê·¸ë¦¼ 9.6 ê²½ë¡œ ë¶„ì„ê¸° ê²°ê³¼ í™•ì¸</p>
<p><a href="https://aws.amazon.com/ko/about-aws/whats-new/2020/05/announcing-route-analyzer-in-aws-transit-gateway-network-manager/" target="_blank" rel="noopener">AWS Transit Gateway ë„¤íŠ¸ì›Œí¬ ê´€ë¦¬ì Route Analyzer ë°œí‘œ</a></p>
<p>ì°¸ê³  ë§í¬ : AWS TGW ë„¤íŠ¸ì›Œí¬ ê´€ë¦¬ Route Analyzer ë°œí‘œ</p>
<hr>
<br>

<h3 id="10-Delete-Resources"><a href="#10-Delete-Resources" class="headerlink" title="10. Delete Resources"></a>10. Delete Resources</h3><p>01) TGW ë„¤íŠ¸ì›Œí¬ ë§¤ë‹ˆì € ì „ì†¡ ê²Œì´íŠ¸ì›¨ì´ ë“±ë¡ ì·¨ì†Œ</p>
<p>02) ê¸€ë¡œë²Œ ë„¤íŠ¸ì›Œí¬ ì‚­ì œ</p>
<p>03) <code>ì„œìš¸</code> CloudFormation ìŠ¤íƒ ì‚­ì œ</p>
<p>04) <code>ì•„ì´ëœë“œ</code> TGW Attachmentì—ì„œ TGW Peering ëŒ€ìƒ ì‚­ì œ</p>
<p>05) <code>ì•„ì¼ëœë“œ</code> CloudFormation ìŠ¤íƒ ì‚­ì œ</p>
<p>06) ì„œë¸Œ ê³„ì • Resource Access Managerì—ì„œ ë¦¬ì†ŒìŠ¤ ê³µìœ  ë‚˜ê°€ê¸°</p>
<p>07) ë©”ì¸ ê³„ì • Resource Access Managerì—ì„œ ë¦¬ì†ŒìŠ¤ ì‚­ì œ</p>
<p>08) ì„œë¸Œ ê³„ì • TGW Attachmentì—ì„œ VPC Attachment ëŒ€ìƒ ì‚­ì œ</p>
<p>09) ì„œë¸Œ ê³„ì • <code>ë²„ì§€ë‹ˆì•„</code> CloudFormation ìŠ¤íƒ ì‚­ì œ</p>
<p>10) <code>ë²„ì§€ë‹ˆì•„</code> ì‚¬ì´íŠ¸ ê°„ VPN ì—°ê²° ì‚­ì œ í›„ ê³ ê° ê²Œì´íŠ¸ì›¨ì´ ì‚­ì œ</p>
<p>11) <code>ë²„ì§€ë‹ˆì•„</code> TGW Multicast Domain ì‚­ì œ (ìš°ì„  Delete Association í›„ ì‚­ì œ)</p>
<p>12) <code>ë²„ì§€ë‹ˆì•„</code> TGW Attachment ëŒ€ìƒ ëª¨ë‘ ì‚­ì œ</p>
<p>13) <code>ë²„ì§€ë‹ˆì•„</code> Trasit Gateway ì‚­ì œ</p>
<p>14) <code>ë²„ì§€ë‹ˆì•„</code> NAT CloudFormation ìŠ¤íƒ ì‚­ì œ</p>
<p>15) <code>ë²„ì§€ë‹ˆì•„</code> MAIN CloudFormation ìŠ¤íƒ  ì‚­ì œ</p>
<blockquote>
<p>ğŸ”” CloudFormation ìŠ¤íƒì„ ì‚­ì œ ì‹œ ì¼ì • ì‹œê°„ì´ ì†Œìš”ë˜ëŠ”ë°, ë„ˆë¬´ ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦°ë‹¤ë©´ ìˆ˜ë™ìœ¼ë¡œ ê´€ë ¨ ì¸í”„ë¼ë¥¼ ì‚­ì œí•´ì•¼ í•œë‹¤.<br>ë°˜ë“œì‹œ, ì‹¤ìŠµì„ ìœ„í•´ ìƒì„±í•œ ë¦¬ì†ŒìŠ¤ëŠ” ì‚­ì œí•œë‹¤.</p>
</blockquote>
<br>
    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/05/07/VPN-SitetoSite-with-Static-Route/" rel="prev" title="AWS VPN Site to Site with Static Route">
      <i class="fa fa-chevron-left"></i> AWS VPN Site to Site with Static Route
    </a></div>
      <div class="post-nav-item"></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    
  <div class="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
  </div>
  

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          ëª©ì°¨
        </li>
        <li class="sidebar-nav-overview">
          ìƒìœ„
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-6"><a class="nav-link" href="#ì‘ì„±ì-ongja-cloudnet"><span class="nav-text">ì‘ì„±ì : ongja.cloudnet@</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-AWS-Transit-Gateway-Theory"><span class="nav-text">1. AWS Transit Gateway Theory</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-AWS-Transit-Gateway-Lab-Preview"><span class="nav-text">2. AWS Transit Gateway Lab Preview</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-AWS-Transit-Gateway-Intra-Region-VPC-Attachment-Test"><span class="nav-text">3. AWS Transit Gateway Intra Region VPC Attachment Test</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-Multicast-on-Transit-Gateway-Test"><span class="nav-text">4. Multicast on Transit Gateway Test</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-AWS-Transit-Gateway-Multi-Account-VPC-Attachment-Test"><span class="nav-text">5. AWS Transit Gateway Multi Account VPC Attachment Test</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-AWS-Transit-Gateway-Inter-Region-Peering-Test"><span class="nav-text">6. AWS Transit Gateway Inter Region Peering Test</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-AWS-Transit-Gateway-VPN-Attachment"><span class="nav-text">7. AWS Transit Gateway VPN Attachment</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-NAT-Gateway-through-AWS-Transit-Gateway"><span class="nav-text">8. NAT Gateway through AWS Transit Gateway</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-AWS-Transit-Gateway-Network-Manager"><span class="nav-text">9. AWS Transit Gateway Network Manager</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-Delete-Resources"><span class="nav-text">10. Delete Resources</span></a></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">CloudNet@</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">3</span>
          <span class="site-state-item-name">í¬ìŠ¤íŠ¸</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">ì¹´í…Œê³ ë¦¬</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">1</span>
        <span class="site-state-item-name">íƒœê·¸</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/cloudneta" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;cloudneta" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:admin@cloudneta.net" title="E-Mail â†’ mailto:admin@cloudneta.net" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.notion.so/CloudNet-Blog-c9dfa44a27ff431dafdd2edacc8a1863" title="Notion â†’ https:&#x2F;&#x2F;www.notion.so&#x2F;CloudNet-Blog-c9dfa44a27ff431dafdd2edacc8a1863" rel="noopener" target="_blank"><i class="fa fa-book fa-fw"></i>Notion</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">CloudNet@</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/mist/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a>
  </div>
  <div class="addthis_inline_share_toolbox">
    <script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5ed513b1de5cbed6" async="async"></script>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://cloudnet-1.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>
<script>
  var disqus_config = function() {
    this.page.url = "http://cloudneta.github.io/2020/05/16/Transit-Gateway/";
    this.page.identifier = "2020/05/16/Transit-Gateway/";
    this.page.title = "LabGuide - AWS Transit Gateway";
    };
  NexT.utils.loadComments(document.querySelector('#disqus_thread'), () => {
    if (window.DISQUS) {
      DISQUS.reset({
        reload: true,
        config: disqus_config
      });
    } else {
      var d = document, s = d.createElement('script');
      s.src = 'https://cloudnet-1.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);
    }
  });
</script>

</body>
</html>
